if(!window.FB){window.FB={_apiKey:null,_authResponse:null,_userStatus:"unknown",_logging:true,_inCanvas:((window.name.indexOf("iframe_canvas")>-1)||(window.name.indexOf("app_runner")>-1)),_https:(window.name.indexOf("_fb_https")>-1),_domain:{api:"https://api.facebook.com/",api_read:"https://api-read.facebook.com/",cdn:"http://static.ak.fbcdn.net/",https_cdn:"https://s-static.ak.fbcdn.net/",graph:"https://graph.facebook.com/",staticfb:"http://static.ak.facebook.com/",https_staticfb:"https://s-static.ak.facebook.com/",www:"http://www.facebook.com/",https_www:"https://www.facebook.com/",m:"http://m.facebook.com/",https_m:"https://m.facebook.com/"},_locale:null,_localeIsRtl:false,_nativeInterface:null,getDomain:function(c,b){var a=!b&&(window.location.protocol=="https:"||FB._https);switch(c){case"api":return FB._domain.api;case"api_read":return FB._domain.api_read;case"cdn":return a?FB._domain.https_cdn:FB._domain.cdn;case"cdn_foreign":return FB._domain.cdn_foreign;case"https_cdn":return FB._domain.https_cdn;case"graph":return FB._domain.graph;case"staticfb":return a?FB._domain.https_staticfb:FB._domain.staticfb;case"https_staticfb":return FB._domain.https_staticfb;case"www":return a?FB._domain.https_www:FB._domain.www;case"https_www":return FB._domain.https_www;case"m":return a?FB._domain.https_m:FB._domain.m;case"https_m":return FB._domain.https_m}},copy:function(e,d,b,a){for(var c in d){if(b||typeof e[c]==="undefined"){e[c]=a?a(d[c]):d[c]}}return e},create:function(d,g){var f=window.FB,a=d?d.split("."):[],j=a.length;for(var e=0;e<j;e++){var b=a[e];var h=f[b];if(!h){h=(g&&e+1==j)?g:{};f[b]=h}f=h}return f},provide:function(c,b,a){return FB.copy(typeof c=="string"?FB.create(c):c,b,a)},guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},log:function(a){if(FB._logging){if(window.Debug&&window.Debug.writeln){window.Debug.writeln(a)}else{if(window.console){window.console.log(a)}}}if(FB.Event){FB.Event.fire("fb.log",a)}},$:function(a){return document.getElementById(a)}}}FB.provide("Array",{indexOf:function(a,d){if(a.indexOf){return a.indexOf(d)}var c=a.length;if(c){for(var b=0;b<c;b++){if(a[b]===d){return b}}}return -1},merge:function(c,b){for(var a=0;a<b.length;a++){if(FB.Array.indexOf(c,b[a])<0){c.push(b[a])}}return c},filter:function(c,e){var a=[];for(var d=0;d<c.length;d++){if(e(c[d])){a.push(c[d])}}return a},keys:function(d,c){var a=[];for(var b in d){if(c||d.hasOwnProperty(b)){a.push(b)}}return a},map:function(a,c){var b=[];for(var d=0;d<a.length;d++){b.push(c(a[d]))}return b},forEach:function(f,d,e){if(!f){return}if(Object.prototype.toString.apply(f)==="[object Array]"||(!(f instanceof Function)&&typeof f.length=="number")){if(f.forEach){f.forEach(d)}else{for(var c=0,a=f.length;c<a;c++){d(f[c],c,f)}}}else{for(var b in f){if(e||f.hasOwnProperty(b)){d(f[b],b,f)}}}},toArray:function(e){for(var d=0,c=[],b=e.length;d<b;d++){c[d]=e[d]}return c}});FB.provide("QS",{encode:function(d,a,b){a=a===undefined?"&":a;b=b===false?function(e){return e}:encodeURIComponent;var c=[];FB.Array.forEach(d,function(f,e){if(f!==null&&typeof f!="undefined"){c.push(b(e)+"="+b(f))}});c.sort();return c.join(a)},decode:function(f){var c=decodeURIComponent,e={},b=f.split("&"),a,d;for(a=0;a<b.length;a++){d=b[a].split("=",2);if(d&&d[0]){e[c(d[0])]=c(d[1]||"")}}return e}});FB.provide("Content",{_root:null,_hiddenRoot:null,_callbacks:{},append:function(b,a){if(!a){if(!FB.Content._root){FB.Content._root=a=FB.$("fb-root");if(!a){FB.log('The "fb-root" div has not been created.');return}else{a.className+=" fb_reset"}}else{a=FB.Content._root}}if(typeof b=="string"){var c=document.createElement("div");a.appendChild(c).innerHTML=b;return c}else{return a.appendChild(b)}},appendHidden:function(c){if(!FB.Content._hiddenRoot){var a=document.createElement("div"),b=a.style;b.position="absolute";b.top="-10000px";b.width=b.height=0;FB.Content._hiddenRoot=FB.Content.append(a)}return FB.Content.append(c,FB.Content._hiddenRoot)},insertIframe:function(f){f.id=f.id||FB.guid();f.name=f.name||FB.guid();var b=FB.guid(),d=false,a=false;FB.Content._callbacks[b]=function(){if(d&&!a){a=true;f.onload&&f.onload(f.root.firstChild)}};if(document.attachEvent){var c=('<iframe id="'+f.id+'" name="'+f.name+'"'+(f.title?' title="'+f.title+'"':"")+(f.className?' class="'+f.className+'"':"")+' style="border:none;'+(f.width?"width:"+f.width+"px;":"")+(f.height?"height:"+f.height+"px;":"")+'" src="javascript:false;" frameborder="0" scrolling="no" allowtransparency="true" onload="FB.Content._callbacks.'+b+'()"></iframe>');f.root.innerHTML='<iframe src="javascript:false" frameborder="0" scrolling="no" style="height:1px"></iframe>';d=true;window.setTimeout(function(){f.root.innerHTML=c;f.root.firstChild.src=f.url;f.onInsert&&f.onInsert(f.root.firstChild)},0)}else{var e=document.createElement("iframe");e.id=f.id;e.name=f.name;e.onload=FB.Content._callbacks[b];e.scrolling="no";e.style.border="none";e.style.overflow="hidden";if(f.title){e.title=f.title}if(f.className){e.className=f.className}if(f.height){e.style.height=f.height+"px"}if(f.width){if(f.width=="100%"){e.style.width=f.width}else{e.style.width=f.width+"px"}}f.root.appendChild(e);d=true;e.src=f.url;f.onInsert&&f.onInsert(e)}},submitToTarget:function(c,a){var b=document.createElement("form");b.action=c.url;b.target=c.target;b.method=(a)?"GET":"POST";FB.Content.appendHidden(b);FB.Array.forEach(c.params,function(f,e){if(f!==null&&f!==undefined){var d=document.createElement("input");d.name=e;d.value=f;b.appendChild(d)}});b.submit();b.parentNode.removeChild(b)}});FB.provide("Flash",{_minVersions:[[9,0,159,0],[10,0,22,87]],_swfPath:"swf/XdComm.swf",_callbacks:[],_names:{},_unloadRegistered:false,init:function(){if(FB.Flash._init){return}FB.Flash._init=true;window.FB_OnFlashXdCommReady=function(){FB.Flash._ready=true;for(var b=0,a=FB.Flash._callbacks.length;b<a;b++){FB.Flash._callbacks[b]()}FB.Flash._callbacks=[]};FB.Flash.embedSWF("XdComm",FB.getDomain("cdn_foreign")+FB.Flash._swfPath)},embedSWF:function(c,e,a){var f=!!document.attachEvent,d=('<object type="application/x-shockwave-flash" id="'+c+'" '+(a?'flashvars="'+a+'" ':"")+(f?'name="'+c+'" ':"")+(f?"":'data="'+e+'" ')+(f?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':"")+'allowscriptaccess="always"><param name="movie" value="'+e+'"></param><param name="allowscriptaccess" value="always"></param></object>');FB.Content.appendHidden(d);if(FB.UA.ie()>=9){if(!FB.Flash._unloadRegistered){var b=function(){FB.Array.forEach(FB.Flash._names,function(i,g){var h=document.getElementById(g);if(h){h.removeNode(true)}})};window.attachEvent("onunload",b);FB.Flash._unloadRegistered=true}FB.Flash._names[c]=true}},hasMinVersion:function(){if(typeof FB.Flash._hasMinVersion==="undefined"){var q,h,f,j=[];try{q=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(k){if(navigator.mimeTypes.length>0){var b="application/x-shockwave-flash";if(navigator.mimeTypes[b].enabledPlugin){var a="Shockwave Flash";q=(navigator.plugins[a+" 2.0"]||navigator.plugins[a]).description}}}if(q){var g=q.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",");for(h=0,f=g.length;h<f;h++){j.push(parseInt(g[h],10))}}FB.Flash._hasMinVersion=false;majorVersion:for(h=0,f=FB.Flash._minVersions.length;h<f;h++){var p=FB.Flash._minVersions[h];if(p[0]!=j[0]){continue}for(var e=1,d=p.length,c=j.length;(e<d&&e<c);e++){if(j[e]<p[e]){FB.Flash._hasMinVersion=false;continue majorVersion}else{FB.Flash._hasMinVersion=true;if(j[e]>p[e]){break majorVersion}}}}}return FB.Flash._hasMinVersion},onReady:function(a){FB.Flash.init();if(FB.Flash._ready){window.setTimeout(a,0)}else{FB.Flash._callbacks.push(a)}}});if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());FB.provide("JSON",{stringify:function(a){if(window.Prototype&&Object.toJSON){return Object.toJSON(a)}else{return JSON.stringify(a)}},parse:function(a){return JSON.parse(a)},flatten:function(c){var d={};for(var a in c){if(c.hasOwnProperty(a)){var b=c[a];if(null===b||undefined===b){continue}else{if(typeof b=="string"){d[a]=b}else{d[a]=FB.JSON.stringify(b)}}}}return d}});FB.provide("",{api:function(){if(typeof arguments[0]==="string"){FB.ApiServer.graph.apply(FB.ApiServer,arguments)}else{FB.ApiServer.rest.apply(FB.ApiServer,arguments)}}});FB.provide("ApiServer",{METHODS:["get","post","delete","put"],_callbacks:{},_readOnlyCalls:{fql_query:true,fql_multiquery:true,friends_get:true,notifications_get:true,stream_get:true,users_getinfo:true},graph:function(){var c=Array.prototype.slice.call(arguments),b=c.shift().match(/\/?([^?]*)\??([^#]*)/),f=b[1],e=c.shift(),h,g,a;while(e){var d=typeof e;if(d==="string"&&!h){h=e.toLowerCase()}else{if(d==="function"&&!a){a=e}else{if(d==="object"&&!g){g=e}else{FB.log("Invalid argument passed to FB.api(): "+e);return}}}e=c.shift()}h=h||"get";g=FB.copy(g||{},FB.QS.decode(b[2]));if(FB.Array.indexOf(FB.ApiServer.METHODS,h)<0){FB.log("Invalid method passed to FB.api(): "+h);return}FB.ApiServer.oauthRequest("graph",f,h,g,a)},rest:function(d,a){var e=d.method.toLowerCase().replace(".","_");if(FB.Auth&&e==="auth_revokeauthorization"){var b=a;a=function(f){if(f===true){FB.Auth.setAuthResponse(null,"not_authorized")}b&&b(f)}}d.format="json-strings";d.api_key=FB._apiKey;var c=FB.ApiServer._readOnlyCalls[e]?"api_read":"api";FB.ApiServer.oauthRequest(c,"restserver.php","get",d,a)},oauthRequest:function(d,e,h,f,a){if(!f.access_token&&FB.getAccessToken()){f.access_token=FB.getAccessToken()}f.sdk="joey";f.pretty=0;var g=a;a=function(i){if(FB.Auth&&i&&FB.getAccessToken()==f.access_token&&(i.error_code==="190"||(i.error&&(i.error==="invalid_token"||i.error.type==="OAuthException")))){FB.getLoginStatus(null,true)}g&&g(i)};try{FB.ApiServer.jsonp(d,e,h,FB.JSON.flatten(f),a)}catch(c){try{if(!FB.initSitevars.corsKillSwitch&&FB.ApiServer.corsPost(d,e,h,FB.JSON.flatten(f),a)){return}}catch(b){}if(FB.Flash.hasMinVersion()){FB.ApiServer.flash(d,e,h,FB.JSON.flatten(f),a)}else{throw new Error("Your browser does not support long connect requests. You can fix this problem by upgrading your browser or installing the latest version of Flash")}}},corsPost:function(f,i,a,d,c){var b=FB.getDomain(f)+i;if(f=="graph"){d.method=a}var h=FB.QS.encode(d);var g="application/x-www-form-urlencoded";var e=FB.ApiServer._createCORSRequest("POST",b,g);if(e){e.onload=function(){c&&c(FB.JSON.parse(e.responseText))};e.send(h);return true}else{return false}},_createCORSRequest:function(d,a,b){if(!window.XMLHttpRequest){return null}var c=new XMLHttpRequest();if("withCredentials" in c){c.open(d,a,true);c.setRequestHeader("Content-type",b)}else{if(window.XDomainRequest){c=new XDomainRequest();c.open(d,a)}else{c=null}}return c},jsonp:function(e,f,i,h,a){var d=FB.guid(),b=document.createElement("script");if(e==="graph"&&i!=="get"){h.method=i}h.callback="FB.ApiServer._callbacks."+d;var c=(FB.getDomain(e)+f+(f.indexOf("?")>-1?"&":"?")+FB.QS.encode(h));if(c.length>2000){throw new Error("JSONP only support a maximum of 2000 bytes of input.")}FB.ApiServer._callbacks[d]=function(g){a&&a(g);delete FB.ApiServer._callbacks[d];b.parentNode.removeChild(b)};b.src=c;document.getElementsByTagName("head")[0].appendChild(b)},flash:function(b,c,e,d,a){if(!window.FB_OnXdHttpResult){window.FB_OnXdHttpResult=function(g,f){FB.ApiServer._callbacks[g](decodeURIComponent(f))}}FB.Flash.onReady(function(){if(b==="graph"){d.suppress_http_code=1}var g=FB.getDomain(b)+c,f=FB.QS.encode(d);if(e==="get"){if(g.length+f.length>2000){if(b==="graph"){d.method="get"}e="post";f=FB.QS.encode(d)}else{g+=(g.indexOf("?")>-1?"&":"?")+f;f=""}}else{if(e!=="post"){if(b==="graph"){d.method=e}e="post";f=FB.QS.encode(d)}}var h=document.XdComm.sendXdHttpRequest(e.toUpperCase(),g,f,null);FB.ApiServer._callbacks[h]=function(i){a&&a(FB.JSON.parse(i));delete FB.ApiServer._callbacks[h]}})}});FB.provide("EventProvider",{subscribers:function(){if(!this._subscribersMap){this._subscribersMap={}}return this._subscribersMap},subscribe:function(b,a){var c=this.subscribers();if(!c[b]){c[b]=[a]}else{c[b].push(a)}},unsubscribe:function(b,a){var c=this.subscribers()[b];FB.Array.forEach(c,function(e,d){if(e==a){c[d]=null}})},monitor:function(b,d){if(!d()){var a=this,c=function(){if(d.apply(d,arguments)){a.unsubscribe(b,c)}};this.subscribe(b,c)}},clear:function(a){delete this.subscribers()[a]},fire:function(){var b=Array.prototype.slice.call(arguments),a=b.shift();FB.Array.forEach(this.subscribers()[a],function(c){if(c){c.apply(this,b)}})},listen:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}},unlisten:function(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{if(a.detachEvent){a.detachEvent("on"+c,b)}}}});FB.provide("Event",FB.EventProvider);FB.provide("XD",{_origin:null,_transport:null,_callbacks:{},_forever:{},_xdProxyUrl:"connect/xd_proxy.php",_openerTransport:null,_openerOrigin:null,_nonOpenerOrigin:null,init:function(c){if(FB.XD._origin){return}var a=(window.location.protocol+"//"+window.location.host+"/"+FB.guid());if(window.addEventListener&&!window.attachEvent&&window.postMessage){FB.XD._origin=a;FB.XD.PostMessage.init();FB.XD._transport="postmessage"}else{if(!c&&FB.Flash.hasMinVersion()){if(document.getElementById("fb-root")){var b=document.domain;if(b=="facebook.com"){b=window.location.host}FB.XD._origin=(window.location.protocol+"//"+b+"/"+FB.guid());FB.XD.Flash.init();FB.XD._transport="flash"}else{if(FB.log){FB.log("missing fb-root, defaulting to fragment-based xdcomm")}FB.XD._transport="fragment";FB.XD.Fragment._channelUrl=c||window.location.toString()}}else{FB.XD._transport="fragment";FB.XD.Fragment._channelUrl=c||window.location.toString()}}var d=!!window.attachEvent;if(FB.XD._transport!="postmessage"&&d&&window.postMessage){FB.XD._openerTransport=FB.XD._transport;FB.XD._openerOrigin=FB.XD._origin;FB.XD._nonOpenerOrigin=a}},resolveRelation:function(g){var f,d,e=g.split("."),c=window;for(var b=0,a=e.length;b<a;b++){f=e[b];if(f==="opener"||f==="parent"||f==="top"){c=c[f]}else{if(d=/^frames\[['"]?([a-zA-Z0-9-_]+)['"]?\]$/.exec(f)){c=c.frames[d[1]]}else{throw new SyntaxError("Malformed id to resolve: "+g+", pt: "+f)}}}return c},handler:function(a,b,g,f,e){if(window.location.toString().indexOf(FB.XD.Fragment._magic)>0){return"javascript:false;//"}if(FB.initSitevars.forceSecureXdProxy){e=true}var d=FB.getDomain((e?"https_":"")+"cdn")+FB.XD._xdProxyUrl+"#";f=f||FB.guid();b=b||"opener";if(FB.XD._openerTransport){if(b=="opener"){FB.XD._transport=FB.XD._openerTransport;FB.XD._origin=FB.XD._openerOrigin}else{FB.XD.PostMessage.init();FB.XD._transport="postmessage";FB.XD._origin=FB.XD._nonOpenerOrigin}}if(FB.XD._transport=="fragment"){d=FB.XD.Fragment._channelUrl;var c=d.indexOf("#");if(c>0){d=d.substr(0,c)}d+=((d.indexOf("?")<0?"?":"&")+FB.XD.Fragment._magic+"#?=&")}if(g){FB.XD._forever[f]=true}FB.XD._callbacks[f]=a;return d+FB.QS.encode({cb:f,origin:FB.XD._origin,relation:b,transport:FB.XD._transport})},recv:function(b){if(typeof b=="string"){try{b=FB.JSON.parse(b)}catch(c){b=FB.QS.decode(b)}}var a=FB.XD._callbacks[b.cb];if(!FB.XD._forever[b.cb]){delete FB.XD._callbacks[b.cb]}a&&a(b)},PostMessage:{_isInitialized:false,init:function(){if(!FB.XD.PostMessage._isInitialized){var a=FB.XD.PostMessage.onMessage;window.addEventListener?window.addEventListener("message",a,false):window.attachEvent("onmessage",a);FB.XD.PostMessage._isInitialized=true}},onMessage:function(a){FB.XD.recv(a.data)}},WebView:{onMessage:function(b,a,c){FB.XD.recv(c)}},Flash:{init:function(){FB.Flash.onReady(function(){document.XdComm.postMessage_init("FB.XD.Flash.onMessage",FB.XD._openerOrigin?FB.XD._openerOrigin:FB.XD._origin)})},onMessage:function(a){FB.XD.recv(decodeURIComponent(a))}},Fragment:{_magic:"fb_xd_fragment",checkAndDispatch:function(){var c=window.location.toString(),a=c.substr(c.indexOf("#")+1),b=c.indexOf(FB.XD.Fragment._magic);if(b>0){FB.init=FB.getLoginStatus=FB.api=function(){};document.documentElement.style.display="none";FB.XD.resolveRelation(FB.QS.decode(a).relation).FB.XD.recv(a)}}}});FB.XD.Fragment.checkAndDispatch();FB.provide("UA",{ie:function(){return FB.UA._populate()||this._ie},firefox:function(){return FB.UA._populate()||this._firefox},opera:function(){return FB.UA._populate()||this._opera},safari:function(){return FB.UA._populate()||this._safari},chrome:function(){return FB.UA._populate()||this._chrome},windows:function(){return FB.UA._populate()||this._windows},osx:function(){return FB.UA._populate()||this._osx},linux:function(){return FB.UA._populate()||this._linux},ios:function(){FB.UA._populate();return FB.UA.mobile()&&this._ios},mobile:function(){FB.UA._populate();return !FB._inCanvas&&this._mobile},nativeApp:function(){return FB.UA.mobile()&&navigator.userAgent.match(/FBAN\/\w+;/i)},android:function(){FB.UA._populate();return FB.UA.mobile()&&this._android},iPad:function(){FB.UA._populate();return FB.UA.mobile()&&this._iPad},_populated:false,_populate:function(){if(FB.UA._populated){return}FB.UA._populated=true;var b=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(navigator.userAgent);var c=/(Mac OS X)|(Windows)|(Linux)/.exec(navigator.userAgent);var a=/\b(iPhone|iP[ao]d)/.exec(navigator.userAgent);FB.UA._iPad=/\b(iPad)/.exec(navigator.userAgent);FB.UA._android=navigator.userAgent.match(/Android/i);FB.UA._mobile=a||FB.UA._android||navigator.userAgent.match(/Mobile/i);if(b){FB.UA._ie=b[1]?parseFloat(b[1]):NaN;if(FB.UA._ie>=8&&!window.HTMLCollection){FB.UA._ie=7}FB.UA._firefox=b[2]?parseFloat(b[2]):NaN;FB.UA._opera=b[3]?parseFloat(b[3]):NaN;FB.UA._safari=b[4]?parseFloat(b[4]):NaN;if(FB.UA._safari){b=/(?:Chrome\/(\d+\.\d+))/.exec(navigator.userAgent);FB.UA._chrome=b&&b[1]?parseFloat(b[1]):NaN}else{FB.UA._chrome=NaN}}else{FB.UA._ie=FB.UA._firefox=FB.UA._opera=FB.UA._chrome=FB.UA._safari=NaN}if(c){FB.UA._osx=!!c[1];FB.UA._windows=!!c[2];FB.UA._linux=!!c[3]}else{FB.UA._osx=FB.UA._windows=FB.UA._linux=false}FB.UA._ios=a}});FB.provide("Arbiter",{_canvasProxyUrl:"connect/canvas_proxy.php",BEHAVIOR_EVENT:"e",BEHAVIOR_PERSISTENT:"p",BEHAVIOR_STATE:"s",inform:function(a,g,d,j,b){if(FB.Canvas.isTabIframe()||(FB._inPlugin&&window.postMessage)||(!FB._inCanvas&&FB.UA.mobile()&&window.postMessage)){var f=FB.JSON.stringify({method:a,params:g,behavior:b||FB.Arbiter.BEHAVIOR_PERSISTENT});if(window.postMessage){FB.XD.resolveRelation(d||"parent").postMessage(f,"*");return}else{try{window.opener.postMessage(f);return}catch(h){}}}j|=(window!=window.parent&&document.referrer.indexOf("https:")===0);var c=(FB.getDomain((j?"https_":"")+"staticfb",true)+FB.Arbiter._canvasProxyUrl+"#"+FB.QS.encode({method:a,params:FB.JSON.stringify(g||{}),behavior:b||FB.Arbiter.BEHAVIOR_PERSISTENT,relation:d}));var i=FB.Content.appendHidden("");FB.Content.insertIframe({url:c,root:i,width:1,height:1,onload:function(){setTimeout(function(){i.parentNode.removeChild(i)},10)}})}});FB.provide("Canvas",{_timer:null,_lastSize:{},_pageInfo:{clientWidth:0,clientHeight:0,scrollLeft:0,scrollTop:0,offsetLeft:0,offsetTop:0},getPageInfo:function(d){var a="top.frames["+window.name+"]";var b=FB.XD.handler(function(f){for(var e in FB.Canvas._pageInfo){if(f[e]){FB.Canvas._pageInfo[e]=f[e]|0}}d&&d(FB.Canvas._pageInfo)},a,true);var c={channelUrl:b,frame:window.name};FB.Arbiter.inform("getPageInfo",c,"top")},hideFlashElement:function(a){a.style.visibility="hidden"},showFlashElement:function(a){a.style.visibility=""},_flashClassID:"CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000",_hideFlashCallback:function(d){var g=window.document.getElementsByTagName("object");for(var f=0;f<g.length;f++){var b=g[f];if(b.type.toLowerCase()!="application/x-shockwave-flash"&&b.classid.toUpperCase()!=FB.Canvas._flashClassID){continue}var c=false;for(var e=0;e<b.childNodes.length;e++){if(b.childNodes[e].nodeName.toLowerCase()=="param"&&b.childNodes[e].name.toLowerCase()=="wmode"){if(b.childNodes[e].value.toLowerCase()=="opaque"||b.childNodes[e].value.toLowerCase()=="transparent"){c=true}}}if(!c){var k=Math.random();if(k<=1/1000){FB.api(FB._apiKey+"/occludespopups","post",{})}if(FB.Canvas._devHideFlashCallback){var h=200;var l={state:d.state,elem:b};var a=FB.bind(function(i){if(i.state=="opened"){FB.Canvas.hideFlashElement(i.elem)}else{FB.Canvas.showFlashElement(i.elem)}},this,l);setTimeout(a,h);FB.Canvas._devHideFlashCallback(l)}else{if(d.state=="opened"){b._old_visibility=b.style.visibility;b.style.visibility="hidden"}else{if(d.state=="closed"){b.style.visibility=b._old_visibility;delete b._old_visibility}}}}}},_devHideFlashCallback:null,_setHideFlashCallback:function(a){FB.Canvas._devHideFlashCallback=a},init:function(){var a=FB.Dom.getViewportInfo();FB.Canvas._pageInfo.clientWidth=a.width;FB.Canvas._pageInfo.clientHeight=a.height;FB.Canvas.getPageInfo();var b=FB.XD.handler(FB.Canvas._hideFlashCallback,"top.frames["+window.name+"]",true);FB.Arbiter.inform("iframeSetupFlashHiding",{channelUrl:b})},setSize:function(d){if(typeof d!="object"){d={}}var b=0,a=0;d=d||{};if(d.width==null||d.height==null){d=FB.copy(d,FB.Canvas._computeContentSize());b=16;a=4}d=FB.copy(d,{frame:window.name||"iframe_canvas"});if(FB.Canvas._lastSize[d.frame]){var e=FB.Canvas._lastSize[d.frame].height;var c=d.height-e;if(FB.Canvas._lastSize[d.frame].width==d.width&&(c<=a&&c>=-b)){return false}}FB.Canvas._lastSize[d.frame]=d;FB.Arbiter.inform("setSize",d);return true},scrollTo:function(a,b){FB.Arbiter.inform("scrollTo",{frame:window.name||"iframe_canvas",x:a,y:b})},setAutoGrow:function(b,a){if(a===undefined&&typeof b=="number"){a=b;b=true}if(b===undefined||b){if(FB.Canvas._timer===null){FB.Canvas._timer=window.setInterval(FB.Canvas.setSize,a||100)}FB.Canvas.setSize()}else{if(FB.Canvas._timer!==null){window.clearInterval(FB.Canvas._timer);FB.Canvas._timer=null}}},setAutoResize:function(b,a){return FB.Canvas.setAutoGrow(b,a)},isTabIframe:function(){return(window.name.indexOf("app_runner_")===0)},setDoneLoading:function(a){FB.Canvas._passAppTtiMessage(a,"RecordIframeAppTti")},stopTimer:function(a){FB.Canvas._passAppTtiMessage(a,"StopIframeAppTtiTimer")},setUrlHandler:function(b){var a=FB.XD.handler(b,"top.frames["+window.name+"]",true);FB.Arbiter.inform("setUrlHandler",a);FB.Event.listen(window,"load",function(){FB.Arbiter.inform("setUrlHandler",a)})},startTimer:function(){FB.Canvas._passAppTtiMessage(null,"StartIframeAppTtiTimer")},_passAppTtiMessage:function(c,a){var b=null;if(c){b=FB.XD.handler(c,"top.frames["+window.name+"]",false)}FB.Arbiter.inform(a,{frame:window.name||"iframe_canvas",time:(new Date()).getTime(),appId:parseInt(FB._apiKey,10),channelUrl:b})},_computeContentSize:function(){var d=document.body,a=document.documentElement,f=0,g=Math.max(d.offsetTop,0),i=Math.max(a.offsetTop,0),e=d.scrollHeight+g,b=d.offsetHeight+g,h=a.scrollHeight+i,c=a.offsetHeight+i;bottom=Math.max(e,b,h,c);if(d.offsetWidth<d.scrollWidth){f=d.scrollWidth+d.offsetLeft}else{FB.Array.forEach(d.childNodes,function(k){var j=k.offsetWidth+k.offsetLeft;if(j>f){f=j}})}if(a.clientLeft>0){f+=(a.clientLeft*2)}if(a.clientTop>0){bottom+=(a.clientTop*2)}return{height:bottom,width:f}}});FB.provide("String",{trim:function(a){return a.replace(/^\s*|\s*$/g,"")},format:function(b){if(!FB.String.format._formatRE){FB.String.format._formatRE=/(\{[^\}^\{]+\})/g}var a=arguments;return b.replace(FB.String.format._formatRE,function(f,c){var d=parseInt(c.substr(1),10),e=a[d+1];if(e===null||e===undefined){return""}return e.toString()})},escapeHTML:function(a){var b=document.createElement("div");b.appendChild(document.createTextNode(a));return b.innerHTML.replace(/"/g,"&quot;").replace(/'/g,"&#39;")},quote:function(c){var a=/["\\\x00-\x1f\x7f-\x9f]/g,b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return a.test(c)?'"'+c.replace(a,function(d){var e=b[d];if(e){return e}e=d.charCodeAt();return"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16)})+'"':'"'+c+'"'}});FB.provide("Dom",{containsCss:function(c,a){var b=" "+c.className+" ";return b.indexOf(" "+a+" ")>=0},addCss:function(b,a){if(!FB.Dom.containsCss(b,a)){b.className=b.className+" "+a}},removeCss:function(b,a){if(FB.Dom.containsCss(b,a)){b.className=b.className.replace(a,"");FB.Dom.removeCss(b,a)}},getByClass:function(f,g,d){g=g||document.body;d=d||"*";if(g.querySelectorAll){return FB.Array.toArray(g.querySelectorAll(d+"."+f))}var e=g.getElementsByTagName(d),c=[];for(var b=0,a=e.length;b<a;b++){if(this.containsCss(e[b],f)){c[c.length]=e[b]}}return c},getStyle:function(c,a){var d=false,b=c.style;if(c.currentStyle){FB.Array.forEach(a.match(/\-([a-z])/g),function(e){a=a.replace(e,e.substr(1,1).toUpperCase())});d=c.currentStyle[a]}else{FB.Array.forEach(a.match(/[A-Z]/g),function(e){a=a.replace(e,"-"+e.toLowerCase())});if(window.getComputedStyle){d=document.defaultView.getComputedStyle(c,null).getPropertyValue(a);if(a=="background-position-y"||a=="background-position-x"){if(d=="top"||d=="left"){d="0px"}}}}if(a=="opacity"){if(c.filters&&c.filters.alpha){return d}return d*100}return d},setStyle:function(d,a,c){var b=d.style;if(a=="opacity"){if(c>=100){c=99.999}if(c<0){c=0}b.opacity=c/100;b.MozOpacity=c/100;b.KhtmlOpacity=c/100;if(d.filters){if(d.filters.alpha==undefined){d.filter="alpha(opacity="+c+")"}else{d.filters.alpha.opacity=c}}}else{b[a]=c}},addScript:function(b){var a=document.createElement("script");a.type="text/javascript";a.src=b;return document.getElementsByTagName("head")[0].appendChild(a)},addCssRules:function(d,e){if(!FB.Dom._cssRules){FB.Dom._cssRules={}}var c=true;FB.Array.forEach(e,function(f){if(!(f in FB.Dom._cssRules)){c=false;FB.Dom._cssRules[f]=true}});if(c){return}if(!FB.UA.ie()){var b=document.createElement("style");b.type="text/css";b.textContent=d;document.getElementsByTagName("head")[0].appendChild(b)}else{try{document.createStyleSheet().cssText=d}catch(a){if(document.styleSheets[0]){document.styleSheets[0].cssText+=d}}}},getViewportInfo:function(){var a=(document.documentElement&&document.compatMode=="CSS1Compat")?document.documentElement:document.body;return{scrollTop:a.scrollTop,scrollLeft:a.scrollLeft,width:self.innerWidth?self.innerWidth:a.clientWidth,height:self.innerHeight?self.innerHeight:a.clientHeight}},ready:function(a){if(FB.Dom._isReady){a&&a()}else{FB.Event.subscribe("dom.ready",a)}},getPosition:function(b){var a=0,c=0;do{a+=b.offsetLeft;c+=b.offsetTop}while(b=b.offsetParent);return{x:a,y:c}}});(function(){function domReady(){FB.Dom._isReady=true;FB.Event.fire("dom.ready");FB.Event.clear("dom.ready")}if(FB.Dom._isReady||document.readyState=="complete"){return domReady()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",domReady,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",domReady)}}if(FB.UA.ie()&&window===top){(function(){try{document.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return}domReady()})()}var oldonload=window.onload;window.onload=function(){domReady();if(oldonload){if(typeof oldonload=="string"){eval(oldonload)}else{oldonload()}}}})();FB.provide("Intl",(function(){var d=("[.!?\u3002\uFF01\uFF1F\u0964\u2026\u0EAF\u1801\u0E2F\uFF0E]");function b(e){if(typeof e!="string"){return false}return e.match(new RegExp(d+"[)\"'\u00BB\u0F3B\u0F3D\u2019\u201D\u203A\u3009\u300B\u300D\u300F\u3011\u3015\u3017\u3019\u301B\u301E\u301F\uFD3F\uFF07\uFF09\uFF3Ds]*$"))}function c(h,e){if(e!==undefined){if(typeof e!="object"){FB.log("The second arg to FB.Intl.tx() must be an Object for FB.Intl.tx("+h+", ...)")}else{var g;for(var f in e){if(e.hasOwnProperty(f)){if(b(e[f])){g=new RegExp("{"+f+"}"+d+"*","g")}else{g=new RegExp("{"+f+"}","g")}h=h.replace(g,e[f])}}}}return h}function a(f,e){if(!FB.Intl._stringTable){return null}return c(FB.Intl._stringTable[f],e)}a._=c;return{tx:a,_tx:c}})());FB.provide("",{bind:function(){var a=Array.prototype.slice.call(arguments),c=a.shift(),b=a.shift();return function(){return c.apply(b,a.concat(Array.prototype.slice.call(arguments)))}},Class:function(a,b,c){if(FB.CLASSES[a]){return FB.CLASSES[a]}var d=b||function(){};d.prototype=c;d.prototype.bind=function(e){return FB.bind(e,this)};d.prototype.constructor=d;FB.create(a,d);FB.CLASSES[a]=d;return d},subclass:function(a,c,b,d){if(FB.CLASSES[a]){return FB.CLASSES[a]}var e=FB.create(c);FB.copy(d,e.prototype);d._base=e;d._callBase=function(g){var f=Array.prototype.slice.call(arguments,1);return e.prototype[g].apply(this,f)};return FB.Class(a,b?b:function(){if(e.apply){e.apply(this,arguments)}},d)},CLASSES:{}});FB.provide("Type",{isType:function(b,a){while(b){if(b.constructor===a||b===a){return true}else{b=b._base}}return false}});FB.Class("Obj",null,FB.copy({setProperty:function(a,b){if(FB.JSON.stringify(b)!=FB.JSON.stringify(this[a])){this[a]=b;this.fire(a,b)}}},FB.EventProvider));FB.subclass("Dialog","Obj",function(a){this.id=a;if(!FB.Dialog._dialogs){FB.Dialog._dialogs={};FB.Dialog._addOrientationHandler()}FB.Dialog._dialogs[a]=this},{});FB.provide("Dialog",{_dialogs:null,_lastYOffset:0,_loaderEl:null,_overlayEl:null,_stack:[],_active:null,_popStateListenerOn:false,_hideOnPopState:function(a){FB.Dialog.hide(FB.Dialog._stack.pop())},get:function(a){return FB.Dialog._dialogs[a]},_findRoot:function(a){while(a){if(FB.Dom.containsCss(a,"fb_dialog")){return a}a=a.parentNode}},_createWWWLoader:function(a){a=parseInt(a,10);a=a?a:460;return FB.Dialog.create({content:('<div class="dialog_title">  <a id="fb_dialog_loader_close">    <div class="fb_dialog_close_icon"></div>  </a>  <span>Facebook</span>  <div style="clear:both;"></div></div><div class="dialog_content"></div><div class="dialog_footer"></div>'),width:a})},_createMobileLoader:function(){var a=FB.UA.nativeApp()?"":('<table>  <tbody>    <tr>      <td class="header_left">        <label class="touchable_button">          <input type="submit" value="'+FB.Intl.tx._("Cancel")+'"            id="fb_dialog_loader_close"/>        </label>      </td>      <td class="header_center">        <div>'+FB.Intl.tx._("Loading...")+'</div>      </td>      <td class="header_right">      </td>    </tr>  </tbody></table>');return FB.Dialog.create({classes:"loading"+(FB.UA.iPad()?" centered":""),content:('<div class="dialog_header">'+a+"</div>")})},_restoreBodyPosition:function(){if(!FB.UA.iPad()){var a=document.getElementsByTagName("body")[0];FB.Dom.removeCss(a,"fb_hidden")}},_showIPadOverlay:function(){if(!FB.UA.iPad()){return}if(!FB.Dialog._overlayEl){FB.Dialog._overlayEl=document.createElement("div");FB.Dialog._overlayEl.setAttribute("id","fb_dialog_ipad_overlay");FB.Content.append(FB.Dialog._overlayEl,null)}FB.Dialog._overlayEl.className=""},_hideIPadOverlay:function(){if(FB.UA.iPad()){FB.Dialog._overlayEl.className="hidden"}},showLoader:function(a,c){FB.Dialog._showIPadOverlay();if(!FB.Dialog._loaderEl){FB.Dialog._loaderEl=FB.Dialog._findRoot(FB.UA.mobile()?FB.Dialog._createMobileLoader():FB.Dialog._createWWWLoader(c))}if(!a){a=function(){}}var d=FB.$("fb_dialog_loader_close");FB.Dom.removeCss(d,"fb_hidden");d.onclick=function(){FB.Dialog._hideLoader();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay();a()};var b=FB.$("fb_dialog_ipad_overlay");if(b){b.ontouchstart=d.onclick}FB.Dialog._makeActive(FB.Dialog._loaderEl)},_hideLoader:function(){if(FB.Dialog._loaderEl&&FB.Dialog._loaderEl==FB.Dialog._active){FB.Dialog._loaderEl.style.top="-10000px"}},_makeActive:function(a){FB.Dialog._setDialogSizes();FB.Dialog._lowerActive();FB.Dialog._active=a;if(FB.Canvas){FB.Canvas.getPageInfo(function(b){FB.Dialog._centerActive(b)})}FB.Dialog._centerActive(FB.Canvas._pageInfo)},_lowerActive:function(){if(!FB.Dialog._active){return}FB.Dialog._active.style.top="-10000px";FB.Dialog._active=null},_removeStacked:function(a){FB.Dialog._stack=FB.Array.filter(FB.Dialog._stack,function(b){return b!=a})},_centerActive:function(k){var g=FB.Dialog._active;if(!g){return}var j=FB.Dom.getViewportInfo();var b=parseInt(g.offsetWidth,10);var l=parseInt(g.offsetHeight,10);var c=j.scrollLeft+(j.width-b)/2;var d=(j.height-l)/2.5;if(c<d){d=c}var e=j.height-l-d;var i=(j.height-l)/2;if(k){i=k.scrollTop-k.offsetTop+(k.clientHeight-l)/2}if(i<d){i=d}else{if(i>e){i=e}}i+=j.scrollTop;if(FB.UA.mobile()){var a=100;if(FB.UA.iPad()){a+=(j.height-l)/2}else{var f=document.getElementsByTagName("body")[0];FB.Dom.addCss(f,"fb_hidden");c=10000;i=10000}var h=FB.Dom.getByClass("fb_dialog_padding",g);if(h.length){h[0].style.height=a+"px"}}g.style.left=(c>0?c:0)+"px";g.style.top=(i>0?i:0)+"px"},_setDialogSizes:function(){if(!FB.UA.mobile()||FB.UA.iPad()){return}for(var b in FB.Dialog._dialogs){if(document.getElementById(b)){var a=document.getElementById(b);a.style.width=FB.UIServer.getDefaultSize().width+"px";a.style.height=FB.UIServer.getDefaultSize().height+"px"}}},_handleOrientationChange:function(a){if(FB.UA.android()&&screen.availWidth==FB.Dialog._availScreenWidth){window.setTimeout(FB.Dialog._handleOrientationChange,50);return}FB.Dialog._availScreenWidth=screen.availWidth;if(FB.UA.iPad()){FB.Dialog._centerActive()}else{for(var b in FB.Dialog._dialogs){if(document.getElementById(b)){document.getElementById(b).style.width=FB.UIServer.getDefaultSize().width+"px"}}}},_addOrientationHandler:function(){if(!FB.UA.mobile()){return}var a="onorientationchange" in window?"orientationchange":"resize";FB.Dialog._availScreenWidth=screen.availWidth;FB.Event.listen(window,a,FB.Dialog._handleOrientationChange)},create:function(e){e=e||{};var a=document.createElement("div"),d=document.createElement("div"),c="fb_dialog";if(e.closeIcon&&e.onClose){var f=document.createElement("a");f.className="fb_dialog_close_icon";f.onclick=e.onClose;a.appendChild(f)}c+=" "+(e.classes||"");if(FB.UA.ie()){c+=" fb_dialog_legacy";FB.Array.forEach(["vert_left","vert_right","horiz_top","horiz_bottom","top_left","top_right","bottom_left","bottom_right"],function(h){var i=document.createElement("span");i.className="fb_dialog_"+h;a.appendChild(i)})}else{c+=(FB.UA.mobile())?" fb_dialog_mobile":" fb_dialog_advanced"}if(e.content){FB.Content.append(e.content,d)}a.className=c;var b=parseInt(e.width,10);if(!isNaN(b)){a.style.width=b+"px"}d.className="fb_dialog_content";a.appendChild(d);if(FB.UA.mobile()){var g=document.createElement("div");g.className="fb_dialog_padding";a.appendChild(g)}FB.Content.append(a);if(e.visible){FB.Dialog.show(a)}return d},show:function(b){var a=FB.Dialog._findRoot(b);if(a){FB.Dialog._removeStacked(a);FB.Dialog._hideLoader();FB.Dialog._makeActive(a);FB.Dialog._stack.push(a);if("fbCallID" in b){FB.Dialog.get(b.fbCallID).fire("iframe_show")}if(!FB.Event._popStateListenerOn){FB.Event.listen(window,"popstate",FB.Dialog._hideOnPopState);FB.Event._popStateListenerOn=true}}},hide:function(b){var a=FB.Dialog._findRoot(b);if(a==FB.Dialog._active){FB.Dialog._lowerActive();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay();if("fbCallID" in b){FB.Dialog.get(b.fbCallID).fire("iframe_hide")}if(FB.Event._popStateListenerOn){FB.Event.unlisten(window,"popstate",FB.Dialog._hideOnPopState);FB.Event._popStateListenerOn=false}}},remove:function(a){a=FB.Dialog._findRoot(a);if(a){var b=FB.Dialog._active==a;FB.Dialog._removeStacked(a);if(b){FB.Dialog._hideLoader();if(FB.Dialog._stack.length>0){FB.Dialog.show(FB.Dialog._stack.pop())}else{FB.Dialog._lowerActive();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay()}}else{if(FB.Dialog._active===null&&FB.Dialog._stack.length>0){FB.Dialog.show(FB.Dialog._stack.pop())}}window.setTimeout(function(){a.parentNode.removeChild(a)},3000)}},isActive:function(b){var a=FB.Dialog._findRoot(b);return a&&a===FB.Dialog._active}});FB.provide("",{ui:function(c,b){c=FB.copy({},c);if(!c.method){FB.log('"method" is a required parameter for FB.ui().');return null}if(FB._nativeInterface){var e="Something Went Wrong\n\n";switch(c.method){case"auth.login":FB._nativeInterface.login(c,b,function(i){alert(e+i)});break;case"permissions.request":FB._nativeInterface.login(c,b,function(i){alert(e+i)});break;case"permissions.oauth":FB._nativeInterface.login(c,b,function(i){alert(e+i)});break;case"auth.logout":FB._nativeInterface.logout(b,function(i){alert(e+i)});break;case"auth.status":FB._nativeInterface.getLoginStatus(b,function(i){alert(e+i)});break;case"login.status":FB._nativeInterface.getLoginStatus(b,function(i){alert(e+i)});break;case"feed":FB._nativeInterface.dialog(c,b,function(i){alert(e+i)});break;case"apprequests":FB._nativeInterface.dialog(c,b,function(i){alert(e+i)});break}return}if((c.method=="permissions.request"||c.method=="permissions.oauth")&&(c.display=="iframe"||c.display=="dialog")){var j;var a;j=c.scope;a=j.split(/\s|,/g);for(var f=0;f<a.length;f++){var d=FB.String.trim(a[f]);if(d&&!FB.initSitevars.iframePermissions[d]){c.display="popup";break}}}var k=FB.UIServer.prepareCall(c,b);if(!k){return null}var h=k.params.display;if(h==="dialog"){h="iframe"}else{if(h==="none"){h="hidden"}}var g=FB.UIServer[h];if(!g){FB.log('"display" must be one of "popup", "dialog", "iframe", "touch", "async", "hidden", or "none"');return null}g(k);return k.dialog}});FB.provide("UIServer",{Methods:{},_loadedNodes:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',_forceHTTPS:false,genericTransform:function(a){if(a.params.display=="dialog"||a.params.display=="iframe"){a.params.display="iframe";a.params.channel=FB.UIServer._xdChannelHandler(a.id,"parent.parent")}return a},prepareCall:function(g,f){var b=g.method.toLowerCase(),a=FB.copy({},FB.UIServer.Methods[b]),d=FB.guid(),i=(a.noHttps!==true)&&(FB._https||(b!=="auth.status"&&b!="login.status"));FB.UIServer._forceHTTPS=i;FB.copy(g,{api_key:FB._apiKey,app_id:FB._apiKey,locale:FB._locale,sdk:"joey",access_token:i&&FB.getAccessToken()||undefined});g.display=FB.UIServer.getDisplayMode(a,g);if(!a.url){a.url="dialog/"+b}var j={cb:f,id:d,size:a.size||FB.UIServer.getDefaultSize(),url:FB.getDomain(i?"https_www":"www")+a.url,forceHTTPS:i,params:g,name:b,dialog:new FB.Dialog(d)};var e=a.transform?a.transform:FB.UIServer.genericTransform;if(e){j=e(j);if(!j){return}}var h=a.getXdRelation||FB.UIServer.getXdRelation;var c=h(j.params);if(!(j.id in FB.UIServer._defaultCb)&&!("next" in j.params)&&!("redirect_uri" in j.params)){j.params.next=FB.UIServer._xdResult(j.cb,j.id,c,true)}if(c==="parent"){j.params.channel_url=FB.UIServer._xdChannelHandler(d,"parent.parent")}j=FB.UIServer.prepareParams(j);return j},prepareParams:function(b){var c=b.params.method;if(!FB.Canvas.isTabIframe()){delete b.params.method}if(FB.TemplateUI&&FB.TemplateUI.supportsTemplate(c,b)){if(FB.reportTemplates){console.log("Using template for "+c+".")}FB.TemplateUI.useCachedUI(c,b)}else{b.params=FB.JSON.flatten(b.params);var a=FB.QS.encode(b.params);if(!FB.UA.nativeApp()&&FB.UIServer.urlTooLongForIE(b.url+"?"+a)){b.post=true}else{if(a){b.url+="?"+a}}}return b},urlTooLongForIE:function(a){return a.length>2000},getDisplayMode:function(b,a){if(a.display==="hidden"||a.display==="none"){return a.display}if(FB.Canvas.isTabIframe()&&a.display!=="popup"){return"async"}if(FB.UA.mobile()||a.display==="touch"){return"touch"}if(!FB.getAccessToken()&&a.display=="dialog"&&!b.loggedOutIframe){FB.log('"dialog" mode can only be used when the user is connected.');return"popup"}if(b.connectDisplay&&!FB._inCanvas){return b.connectDisplay}return a.display||(FB.getAccessToken()?"dialog":"popup")},getXdRelation:function(b){var a=b.display;if(a==="popup"||a==="touch"){return"opener"}if(a==="dialog"||a==="iframe"||a==="hidden"||a==="none"){return"parent"}if(a==="async"){return"parent.frames["+window.name+"]"}},popup:function(k){var c=typeof window.screenX!="undefined"?window.screenX:window.screenLeft,d=typeof window.screenY!="undefined"?window.screenY:window.screenTop,j=typeof window.outerWidth!="undefined"?window.outerWidth:document.documentElement.clientWidth,h=typeof window.outerHeight!="undefined"?window.outerHeight:(document.documentElement.clientHeight-22),a=FB.UA.mobile()?null:k.size.width,i=FB.UA.mobile()?null:k.size.height,f=(c<0)?window.screen.width+c:c,e=parseInt(f+((j-a)/2),10),g=parseInt(d+((h-i)/2.5),10),b=[];if(a!==null){b.push("width="+a)}if(i!==null){b.push("height="+i)}b.push("left="+e);b.push("top="+g);b.push("scrollbars=1");if(k.name=="permissions.request"||k.name=="permissions.oauth"){b.push("location=1,toolbar=0")}b=b.join(",");if(k.post){FB.UIServer.setLoadedNode(k,window.open("about:blank",k.id,b),"popup");FB.Content.submitToTarget({url:k.url,target:k.id,params:k.params})}else{FB.UIServer.setLoadedNode(k,window.open(k.url,k.id,b),"popup")}if(k.id in FB.UIServer._defaultCb){FB.UIServer._popupMonitor()}},setLoadedNode:function(b,c,a){if(b.params&&b.params.display!="popup"){c.fbCallID=b.id}c={node:c,type:a,fbCallID:b.id};FB.UIServer._loadedNodes[b.id]=c},getLoadedNode:function(a){var c=typeof a=="object"?a.id:a,b=FB.UIServer._loadedNodes[c];return b?b.node:null},hidden:function(a){a.className="FB_UI_Hidden";a.root=FB.Content.appendHidden("");FB.UIServer._insertIframe(a)},iframe:function(b){b.className="FB_UI_Dialog";var a=function(){FB.UIServer._triggerDefault(b.id)};b.root=FB.Dialog.create({onClose:a,closeIcon:true,classes:(FB.UA.iPad()?"centered":"")});if(!b.hideLoader){FB.Dialog.showLoader(a,b.size.width)}FB.Dom.addCss(b.root,"fb_dialog_iframe");FB.UIServer._insertIframe(b)},touch:function(a){if(a.params&&a.params.in_iframe){if(a.ui_created){FB.Dialog.showLoader(function(){FB.UIServer._triggerDefault(a.id)},0)}else{FB.UIServer.iframe(a)}}else{if(FB.UA.nativeApp()&&!a.ui_created){a.frame=a.id;FB.Native.onready(function(){FB.UIServer.setLoadedNode(a,FB.Native.open(a.url+"#cb="+a.frameName))});FB.UIServer._popupMonitor()}else{if(!a.ui_created){FB.UIServer.popup(a)}}}},async:function(a){a.frame=window.name;delete a.url;delete a.size;FB.Arbiter.inform("showDialog",a)},getDefaultSize:function(){if(FB.UA.mobile()){if(FB.UA.iPad()){return{width:500,height:590}}else{if(FB.UA.android()){return{width:screen.availWidth,height:screen.availHeight}}else{var c=window.innerWidth;var a=window.innerHeight;var b=c/a>1.2;return{width:c,height:Math.max(a,(b?screen.width:screen.height))}}}}return{width:575,height:240}},_insertIframe:function(b){FB.UIServer._loadedNodes[b.id]=false;var a=function(c){if(b.id in FB.UIServer._loadedNodes){FB.UIServer.setLoadedNode(b,c,"iframe")}};if(b.post){FB.Content.insertIframe({url:"about:blank",root:b.root,className:b.className,width:b.size.width,height:b.size.height,id:b.id,onInsert:a,onload:function(c){FB.Content.submitToTarget({url:b.url,target:c.name,params:b.params})}})}else{FB.Content.insertIframe({url:b.url,root:b.root,className:b.className,width:b.size.width,height:b.size.height,id:b.id,name:b.frameName,onInsert:a})}},_handleResizeMessage:function(c,b){var a=FB.UIServer.getLoadedNode(c);if(!a){return}if(b.height){a.style.height=b.height+"px"}if(b.width){a.style.width=b.width+"px"}FB.Arbiter.inform("resize.ack",b||{},"parent.frames["+a.name+"]",true);if(!FB.Dialog.isActive(a)){FB.Dialog.show(a)}},_triggerDefault:function(a){FB.UIServer._xdRecv({frame:a},FB.UIServer._defaultCb[a]||function(){})},_popupMonitor:function(){var b;for(var d in FB.UIServer._loadedNodes){if(FB.UIServer._loadedNodes.hasOwnProperty(d)&&d in FB.UIServer._defaultCb){var a=FB.UIServer._loadedNodes[d];if(a.type!="popup"){continue}win=a.node;try{if(win.closed){FB.UIServer._triggerDefault(d)}else{b=true}}catch(c){}}}if(b&&!FB.UIServer._popupInterval){FB.UIServer._popupInterval=window.setInterval(FB.UIServer._popupMonitor,100)}else{if(!b&&FB.UIServer._popupInterval){window.clearInterval(FB.UIServer._popupInterval);FB.UIServer._popupInterval=null}}},_xdChannelHandler:function(c,b){var a=(FB.UIServer._forceHTTPS&&FB.UA.ie()!==7);return FB.XD.handler(function(f){var e=FB.UIServer.getLoadedNode(c);if(!e){return}if(f.type=="resize"){FB.UIServer._handleResizeMessage(c,f)}else{if(f.type=="hide"){FB.Dialog.hide(e)}else{if(f.type=="rendered"){var d=FB.Dialog._findRoot(e);FB.Dialog.show(d)}else{if(f.type=="fireevent"){FB.Event.fire(f.event)}}}}},b,true,null,a)},_xdNextHandler:function(a,d,b,c){if(c){FB.UIServer._defaultCb[d]=a}return FB.XD.handler(function(e){FB.UIServer._xdRecv(e,a)},b)+"&frame="+d},_xdRecv:function(c,b){var d=FB.UIServer.getLoadedNode(c.frame);if(d){try{if(FB.Dom.containsCss(d,"FB_UI_Hidden")){window.setTimeout(function(){d.parentNode.parentNode.removeChild(d.parentNode)},3000)}else{if(FB.Dom.containsCss(d,"FB_UI_Dialog")){FB.Dialog.remove(d);if(FB.TemplateUI&&FB.UA.mobile()){FB.TemplateUI.populateCache()}}}}catch(a){}try{if(d.close){d.close();FB.UIServer._popupCount--}}catch(e){}}delete FB.UIServer._loadedNodes[c.frame];delete FB.UIServer._defaultCb[c.frame];b(c)},_xdResult:function(a,d,c,b){return(FB.UIServer._xdNextHandler(function(e){a&&a(e.result&&e.result!=FB.UIServer._resultToken&&FB.JSON.parse(e.result))},d,c,b)+"&result="+encodeURIComponent(FB.UIServer._resultToken))}});FB.provide("",{getLoginStatus:function(a,b){if(!FB._apiKey){FB.log("FB.getLoginStatus() called before calling FB.init().");return}if(a){if(!b&&FB.Auth._loadState=="loaded"){a({status:FB._userStatus,authResponse:FB._authResponse});return}else{FB.Event.subscribe("FB.loginStatus",a)}}if(!b&&FB.Auth._loadState=="loading"){return}FB.Auth._loadState="loading";var c=function(d){FB.Auth._loadState="loaded";FB.Event.fire("FB.loginStatus",d);FB.Event.clear("FB.loginStatus")};FB.Auth.fetchLoginStatus(c)},getAuthResponse:function(){return FB._authResponse},getAccessToken:function(){return(FB._authResponse&&FB._authResponse.accessToken)||null},getUserID:function(){return FB._userID},login:function(a,b){if(b&&b.perms&&!b.scope){b.scope=b.perms;delete b.perms;FB.log("OAuth2 specification states that 'perms' should now be called 'scope'.  Please update.")}FB.ui(FB.copy({method:"permissions.oauth",display:"popup",domain:location.hostname},b||{}),a)},logout:function(a){FB.ui({method:"auth.logout",display:"hidden"},a)}});FB.provide("Auth",{_callbacks:[],_xdStorePath:"xd_localstorage/",fetchLoginStatus:function(a){if(FB.UA.mobile()&&window.postMessage&&window.localStorage&&!FB._nativeInterface){FB.Auth.staticAuthCheck(a)}else{FB.ui({method:"login.status",display:"none",domain:location.hostname},a)}},staticAuthCheck:function(b){var a=FB.getDomain("https_staticfb");FB.Content.insertIframe({root:FB.Content.appendHidden(""),className:"FB_UI_Hidden",url:a+FB.Auth._xdStorePath,onload:function(e){var g=frames[e.name];var c=FB.guid();var f=false;var d=function(h){if(!f){f=true;FB.Auth._staticAuthHandler(b,h)}};FB.XD.handler(d,"parent",true,c);setTimeout(d,500);g.postMessage(FB.JSON.stringify({method:"getItem",params:["LoginInfo_"+FB._apiKey,true],returnCb:c}),a)}})},_staticAuthHandler:function(a,d){if(d&&d.data&&d.data.status&&d.data.status=="connected"){var e;var b=d.data.status;if(d.data.https==1){FB._https=true}var c=d.data.authResponse||null;e=FB.Auth.setAuthResponse(c,b);a&&a(e)}else{FB.ui({method:"login.status",display:"none"},a)}},setAuthResponse:function(a,d){var i=0;if(a){if(a.userID){i=a.userID}else{if(a.signedRequest){var e=FB.Auth.parseSignedRequest(a.signedRequest);if(e&&e.user_id){i=e.user_id}}}}var h=!FB._userID&&a,j=FB._userID&&!a,g=a&&FB._userID!=i,c=h||j||g,f=d!=FB._userStatus;var b={authResponse:a,status:d};FB._authResponse=a;FB._userID=i;FB._userStatus=d;if(j||g){FB.Event.fire("auth.logout",b)}if(h||g){FB.Event.fire("auth.login",b)}if(c){FB.Event.fire("auth.authResponseChange",b)}if(f){FB.Event.fire("auth.statusChange",b)}if(FB.Auth._refreshTimer){window.clearTimeout(FB.Auth._refreshTimer);delete FB.Auth._refreshTimer}if(FB.Auth._loadState&&a){FB.Auth._refreshTimer=window.setTimeout(function(){FB.getLoginStatus(null,true)},1200000)}return b},_getContextType:function(){if(FB.UA.nativeApp()){return 3}if(FB.UA.mobile()){return 2}if(FB._inCanvas){return 5}return 1},xdHandler:function(a,d,c,b,e){return FB.UIServer._xdNextHandler(FB.Auth.xdResponseWrapper(a,b,e),d,c,true)},xdResponseWrapper:function(a,b,c){return function(h){if(h.access_token){var g=FB.Auth.parseSignedRequest(h.signed_request);b={accessToken:h.access_token,userID:g.user_id,expiresIn:parseInt(h.expires_in,10),signedRequest:h.signed_request};if(FB.Cookie.getEnabled()){var f=b.expiresIn===0?0:(new Date()).getTime()+b.expiresIn*1000;var e=FB.Cookie._domain;if(!e&&h.base_domain){e="."+h.base_domain}FB.Cookie.setSignedRequestCookie(h.signed_request,f,e)}FB.Auth.setAuthResponse(b,"connected")}else{if(!FB._authResponse&&b){FB.Auth.setAuthResponse(b,"connected")}else{if(!(b&&c=="permissions.oauth")){var d;if(h.error&&h.error==="not_authorized"){d="not_authorized"}else{d="unknown"}FB.Auth.setAuthResponse(null,d);if(FB.Cookie.getEnabled()){FB.Cookie.clearSignedRequestCookie()}}}}if(h&&h.https==1&&!FB._https){FB._https=true}response={authResponse:FB._authResponse,status:FB._userStatus};a&&a(response)}},parseSignedRequest:function(c){if(!c){return null}var a=c.split(".",2);var d=a[1];var b=FB.Auth.base64URLDecode(d);return FB.JSON.parse(b)},base64URLDecode:function(g){g=g.replace(/\-/g,"+").replace(/\_/g,"/");if(g.length%4!==0){var f=4-g.length%4;for(var e=0;e<f;e++){g=g+"="}}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var a="";var o,m,k="";var n,l,j,h="";for(var c=0;c<g.length;c+=4){n=b.indexOf(g.charAt(c));l=b.indexOf(g.charAt(c+1));j=b.indexOf(g.charAt(c+2));h=b.indexOf(g.charAt(c+3));o=(n<<2)|(l>>4);m=((l&15)<<4)|(j>>2);k=((j&3)<<6)|h;a=a+String.fromCharCode(o);if(j!=64){a=a+String.fromCharCode(m)}if(h!=64){a=a+String.fromCharCode(k)}o=m=k="";n=l=j=h=""}return unescape(a)}});FB.provide("UIServer.Methods",{"permissions.oauth":{url:"dialog/oauth",size:{width:(FB.UA.mobile()?null:627),height:(FB.UA.mobile()?null:326)},transform:function(b){if(!FB._apiKey){FB.log("FB.login() called before FB.init().");return}if(FB._authResponse&&!b.params.scope){FB.log("FB.login() called when user is already connected.");b.cb&&b.cb({status:FB._userStatus,authResponse:FB._authResponse});return}var a=b.cb,c=b.id;delete b.cb;FB.copy(b.params,{client_id:FB._apiKey,redirect_uri:FB.URI.resolve(FB.Auth.xdHandler(a,c,"opener",FB._authResponse,"permissions.oauth")),origin:FB.Auth._getContextType(),response_type:"token,signed_request",domain:location.hostname});return b}},"auth.logout":{url:"logout.php",transform:function(a){if(!FB._apiKey){FB.log("FB.logout() called before calling FB.init().")}else{if(!FB._authResponse){FB.log("FB.logout() called without an access token.")}else{a.params.next=FB.Auth.xdHandler(a.cb,a.id,"parent",FB._authResponse);return a}}}},"login.status":{url:"dialog/oauth",transform:function(b){var a=b.cb,c=b.id;delete b.cb;FB.copy(b.params,{client_id:FB._apiKey,redirect_uri:FB.Auth.xdHandler(a,c,"parent",FB._authResponse),origin:FB.Auth._getContextType(),response_type:"token,signed_request,code",domain:location.hostname});return b}}});FB.provide("CanvasInsights",{setDoneLoading:function(a){FB.Canvas.setDoneLoading(a)}});FB.provide("Cookie",{_domain:null,_enabled:false,setEnabled:function(a){FB.Cookie._enabled=!!a;if(typeof a=="string"){FB.Cookie._domain=a}},getEnabled:function(){return FB.Cookie._enabled},loadMeta:function(){var a=document.cookie.match("\\bfbm_"+FB._apiKey+"=([^;]*)\\b"),b;if(a){b=FB.QS.decode(a[1]);if(!FB.Cookie._domain){FB.Cookie._domain=b.base_domain}}return b},loadSignedRequest:function(){var a=document.cookie.match("\\bfbsr_"+FB._apiKey+"=([^;]*)\\b");if(!a){return null}return a[1]},setSignedRequestCookie:function(b,d,a){if(!b){throw new Error("Value passed to FB.Cookie.setSignedRequestCookie was empty.")}if(!FB.Cookie.getEnabled()){return}if(a){var c=FB.QS.encode({base_domain:a});FB.Cookie.setRaw("fbm_",c,d,a)}FB.Cookie._domain=a;FB.Cookie.setRaw("fbsr_",b,d,a)},clearSignedRequestCookie:function(){if(!FB.Cookie.getEnabled()){return}FB.Cookie.setRaw("fbsr_","",0,FB.Cookie._domain)},setRaw:function(d,e,b,c){if(c){document.cookie=d+FB._apiKey+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;";document.cookie=d+FB._apiKey+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;domain="+location.hostname+";"}var a=new Date(b).toGMTString();document.cookie=d+FB._apiKey+"="+e+(e&&b===0?"":"; expires="+a)+"; path=/"+(c?"; domain="+c:"")}});FB.provide("Frictionless",{_allowedRecipients:{},_useFrictionless:false,_updateRecipients:function(){FB.Frictionless._allowedRecipients={};FB.api("/me/apprequestformerrecipients",function(a){if(!a||a.error){return}FB.Array.forEach(a.data,function(b){FB.Frictionless._allowedRecipients[b.recipient_id]=true},false)})},init:function(){FB.Frictionless._useFrictionless=true;FB.getLoginStatus(function(a){if(a.status=="connected"){FB.Frictionless._updateRecipients()}});FB.Event.subscribe("auth.login",function(a){if(a.authResponse){FB.Frictionless._updateRecipients()}})},_processRequestResponse:function(a,b){return function(d){var c=d&&d.updated_frictionless;if(FB.Frictionless._useFrictionless&&c){FB.Frictionless._updateRecipients()}if(d){if(!b&&d.frictionless){FB.Dialog._hideLoader();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay()}delete d.frictionless;delete d.updated_frictionless}a&&a(d)}},isAllowed:function(b){if(!b){return false}if(typeof b==="number"){return FB.Frictionless._allowedRecipients[b]}if(typeof b==="string"){b=b.split(",")}b=FB.Array.map(b,FB.String.trim);var c=true;var a=false;FB.Array.forEach(b,function(d){c=c&&FB.Frictionless._allowedRecipients[d];a=true},false);return c&&a}});FB.provide("Canvas.Prefetcher",{_sampleRate:0,_appIdsBlacklist:[],_links:[],COLLECT_AUTOMATIC:0,COLLECT_MANUAL:1,_collectionMode:0,addStaticResource:function(a){if(!FB._inCanvas||!FB._apiKey){return}FB.Canvas.Prefetcher._links.push(a)},setCollectionMode:function(a){if(!FB._inCanvas||!FB._apiKey){return false}if(a!=FB.Canvas.Prefetcher.COLLECT_AUTOMATIC&&a!=FB.Canvas.Prefetcher.COLLECT_MANUAL){return false}FB.Canvas.Prefetcher._collectionMode=a},_maybeSample:function(){if(!FB._inCanvas||!FB._apiKey||!FB.Canvas.Prefetcher._sampleRate){return}var a=Math.random();if(a>1/FB.Canvas.Prefetcher._sampleRate){return}if(FB.Canvas.Prefetcher._appIdsBlacklist=="*"){return}if(FB.Array.indexOf(FB.Canvas.Prefetcher._appIdsBlacklist,parseInt(FB._apiKey,10))!=-1){return}window.setTimeout(FB.Canvas.Prefetcher._sample,30000)},_sample:function(){var a={object:"data",link:"href",script:"src"};if(FB.Canvas.Prefetcher._collectionMode==FB.Canvas.Prefetcher.COLLECT_AUTOMATIC){FB.Array.forEach(a,function(c,d){FB.Array.forEach(window.document.getElementsByTagName(d),function(e){if(e[c]){FB.Canvas.Prefetcher._links.push(e[c])}})})}var b=FB.JSON.stringify(FB.Canvas.Prefetcher._links);FB.api(FB._apiKey+"/staticresources","post",{urls:b,is_https:FB._https});FB.Canvas.Prefetcher._links=[]}});FB.provide("Canvas.EarlyFlush",{addResource:function(a){return FB.Canvas.Prefetcher.addStaticResource(a)},setCollectionMode:function(a){return FB.Canvas.Prefetcher.setCollectionMode(a)}});FB.provide("",{initSitevars:{},init:function(a){a=FB.copy(a||{},{logging:true,status:true});FB._userID=0;FB._apiKey=a.appId||a.apiKey;FB._nativeInterface=a.nativeInterface;if(FB._nativeInterface){FB._nativeInterface.init(FB._apiKey,function(d){alert("Cordova Facebook Connect plugin fail on init!")})}if(!a.logging&&window.location.toString().indexOf("fb_debug=1")<0){FB._logging=false}FB.XD.init(a.channelUrl);if(FB.UA.mobile()&&FB.TemplateUI&&FB.TemplateData&&FB.TemplateData._enabled&&a.useCachedDialogs!==false){FB.TemplateUI.init();FB.Event.subscribe("auth.statusChange",FB.TemplateData.update)}if(a.reportTemplates){FB.reportTemplates=true}if(a.frictionlessRequests){FB.Frictionless.init()}if(FB._apiKey){FB.Cookie.setEnabled(a.cookie);if(a.authResponse){FB.Auth.setAuthResponse(a.authResponse,"connected")}else{var b=FB.Cookie.loadSignedRequest();var c=FB.Auth.parseSignedRequest(b);FB._userID=(c&&c.user_id)||0;FB.Cookie.loadMeta()}if(a.status){FB.getLoginStatus()}}if(FB._inCanvas){FB.Canvas._setHideFlashCallback(a.hideFlashCallback);FB.Canvas.init()}FB.Event.subscribe("xfbml.parse",function(){FB.XFBML.IframeWidget.batchWidgetPipeRequests()});if(a.xfbml){window.setTimeout(function(){if(FB.XFBML){if(FB.initSitevars.parseXFBMLBeforeDomReady){FB.XFBML.parse();var d=window.setInterval(function(){FB.XFBML.parse()},100);FB.Dom.ready(function(){window.clearInterval(d);FB.XFBML.parse()})}else{FB.Dom.ready(FB.XFBML.parse)}}},0)}if(FB.Canvas&&FB.Canvas.Prefetcher){FB.Canvas.Prefetcher._maybeSample()}}});FB.provide("UIServer.MobileIframableMethod",{transform:function(a){if(a.params.display==="touch"&&a.params.access_token&&window.postMessage){a.params.channel=FB.UIServer._xdChannelHandler(a.id,"parent");if(!FB.UA.nativeApp()){a.params.in_iframe=1}return a}else{return FB.UIServer.genericTransform(a)}},getXdRelation:function(b){var a=b.display;if(a==="touch"&&window.postMessage&&b.in_iframe){return"parent"}return FB.UIServer.getXdRelation(b)}});FB.provide("UIServer.Methods",{"stream.share":{size:{width:650,height:340},url:"sharer.php",transform:function(a){if(!a.params.u){a.params.u=window.location.toString()}return a}},"fbml.dialog":{size:{width:575,height:300},url:"render_fbml.php",loggedOutIframe:true,transform:function(a){return a}},"auth.logintofacebook":{size:{width:530,height:287},url:"login.php",transform:function(b){b.params.skip_api_login=1;var c=FB.UIServer.getXdRelation(b.params);var a=FB.UIServer._xdResult(b.cb,b.id,c,true);b.params.next=FB.getDomain(FB._https?"https_www":"www")+"login.php?"+FB.QS.encode({api_key:FB._apiKey,next:a,skip_api_login:1});return b}},apprequests:{transform:function(a){a=FB.UIServer.MobileIframableMethod.transform(a);a.params.frictionless=FB.Frictionless&&FB.Frictionless._useFrictionless;if(a.params.frictionless){if(FB.Frictionless.isAllowed(a.params.to)){a.params.in_iframe=true;a.hideLoader=true}a.cb=FB.Frictionless._processRequestResponse(a.cb,a.hideLoader)}return a},getXdRelation:function(a){return FB.UIServer.MobileIframableMethod.getXdRelation(a)}},feed:FB.UIServer.MobileIframableMethod});FB.provide("",{share:function(a){FB.log("FB.share() has been deprecated. Please use FB.ui() instead.");FB.ui({display:"popup",method:"stream.share",u:a})},publish:function(b,a){FB.log("FB.publish() has been deprecated. Please use FB.ui() instead.");b=b||{};FB.ui(FB.copy({display:"popup",method:"stream.publish",preview:1},b||{}),a)},addFriend:function(b,a){FB.log("FB.addFriend() has been deprecated. Please use FB.ui() instead.");FB.ui({display:"popup",id:b,method:"friend.add"},a)}});FB.UIServer.Methods["auth.login"]=FB.UIServer.Methods["permissions.request"];FB.provide("XFBML",{_renderTimeout:30000,getElements:function(e,f,b){var a=FB.Array,d=FB.XFBML._getDomElements(e,f,b),c=FB.Dom.getByClass(f+"-"+b,e,"div");d=a.toArray(d);c=a.toArray(c);c=a.filter(c,function(g){return !g.hasChildNodes()||(g.childNodes.length===1&&g.childNodes[0].nodeType===3)});return a.merge(d,c)},parse:function(e,a){e=e||document.body;var d=1,b=function(){d--;if(d===0){a&&a();FB.Event.fire("xfbml.render")}};var c={};if(FB.XFBML._widgetPipeIsEnabled()){FB.Array.forEach(FB.XFBML._tagInfos,function(g){if(g.supportsWidgetPipe){var h=g.xmlns?g.xmlns:"fb";var f=FB.XFBML.getElements(e,h,g.localName);c[g.localName]=f;FB.XFBML._widgetPipeEnabledTagCount+=f.length}})}FB.Array.forEach(FB.XFBML._tagInfos,function(h){if(!h.xmlns){h.xmlns="fb"}var g;if(c[h.localName]!==undefined){g=c[h.localName]}else{g=FB.XFBML.getElements(e,h.xmlns,h.localName)}for(var f=0;f<g.length;f++){d++;FB.XFBML._processElement(g[f],h,b)}});FB.Event.fire("xfbml.parse");window.setTimeout(function(){if(d>0){FB.log(d+" XFBML tags failed to render in "+FB.XFBML._renderTimeout+"ms.")}},FB.XFBML._renderTimeout);b()},registerTag:function(a){FB.XFBML._tagInfos.push(a)},shouldUseWidgetPipe:function(){if(!FB.XFBML._widgetPipeIsEnabled()){return false}var a=FB.XFBML._widgetPipeEnabledTagCount>1;return a},getBoolAttr:function(b,a){a=FB.XFBML.getAttr(b,a);return(a&&FB.Array.indexOf(["true","1","yes","on"],a.toLowerCase())>-1)},getAttr:function(b,a){return(b.getAttribute(a)||b.getAttribute(a.replace(/_/g,"-"))||b.getAttribute(a.replace(/-/g,"_"))||b.getAttribute(a.replace(/-/g,""))||b.getAttribute(a.replace(/_/g,""))||b.getAttribute("data-"+a)||b.getAttribute("data-"+a.replace(/_/g,"-"))||b.getAttribute("data-"+a.replace(/-/g,"_"))||b.getAttribute("data-"+a.replace(/-/g,""))||b.getAttribute("data-"+a.replace(/_/g,""))||null)},_processElement:function(dom,tagInfo,cb){var element=dom._element;if(element){element.subscribe("render",cb);element.process()}else{var processor=function(){var fn=eval(tagInfo.className);var isLogin=false;var showFaces=true;var showLoginFace=false;var renderInIframe=false;var addToTimeline=(tagInfo.className==="FB.XFBML.AddToTimeline");if((tagInfo.className==="FB.XFBML.LoginButton")||addToTimeline){renderInIframe=FB.XFBML.getBoolAttr(dom,"render-in-iframe");mode=FB.XFBML.getAttr(dom,"mode");showFaces=(addToTimeline&&mode!="button")||FB.XFBML.getBoolAttr(dom,"show-faces");showLoginFace=FB.XFBML.getBoolAttr(dom,"show-login-face");isLogin=addToTimeline||renderInIframe||showFaces||showLoginFace||FB.XFBML.getBoolAttr(dom,"oneclick");if(isLogin&&!addToTimeline){fn=FB.XFBML.Login}}element=dom._element=new fn(dom);if(isLogin){showFaces=!!showFaces;showLoginFace=!!showLoginFace;var extraParams={show_faces:showFaces,show_login_face:showLoginFace,add_to_profile:addToTimeline,mode:mode};var scope=FB.XFBML.getAttr(dom,"scope")||FB.XFBML.getAttr(dom,"perms");if(scope){extraParams.scope=scope}element.setExtraParams(extraParams)}element.subscribe("render",cb);element.process()};if(FB.CLASSES[tagInfo.className.substr(3)]){processor()}else{FB.log("Tag "+tagInfo.className+" was not found.")}}},_getDomElements:function(f,h,b){var d=h+":"+b;if(FB.UA.firefox()){return f.getElementsByTagNameNS(document.body.namespaceURI,d)}else{if(FB.UA.ie()<9){try{var g=document.namespaces;if(g&&g[h]){var a=f.getElementsByTagName(b);if(!document.addEventListener||a.length>0){return a}}}catch(c){}return f.getElementsByTagName(d)}else{return f.getElementsByTagName(d)}}},_tagInfos:[{localName:"activity",className:"FB.XFBML.Activity"},{localName:"add-profile-tab",className:"FB.XFBML.AddProfileTab"},{localName:"add-to-timeline",className:"FB.XFBML.AddToTimeline"},{localName:"bookmark",className:"FB.XFBML.Bookmark"},{localName:"comments",className:"FB.XFBML.Comments"},{localName:"comments-count",className:"FB.XFBML.CommentsCount"},{localName:"connect-bar",className:"FB.XFBML.ConnectBar"},{localName:"fan",className:"FB.XFBML.Fan"},{localName:"like",className:"FB.XFBML.Like",supportsWidgetPipe:true},{localName:"like-box",className:"FB.XFBML.LikeBox"},{localName:"live-stream",className:"FB.XFBML.LiveStream"},{localName:"login",className:"FB.XFBML.Login"},{localName:"login-button",className:"FB.XFBML.LoginButton"},{localName:"facepile",className:"FB.XFBML.Facepile"},{localName:"friendpile",className:"FB.XFBML.Friendpile"},{localName:"name",className:"FB.XFBML.Name"},{localName:"profile-pic",className:"FB.XFBML.ProfilePic"},{localName:"question",className:"FB.XFBML.Question"},{localName:"recommendations",className:"FB.XFBML.Recommendations"},{localName:"recommendations-bar",className:"FB.XFBML.RecommendationsBar"},{localName:"registration",className:"FB.XFBML.Registration"},{localName:"send",className:"FB.XFBML.Send"},{localName:"serverfbml",className:"FB.XFBML.ServerFbml"},{localName:"share-button",className:"FB.XFBML.ShareButton"},{localName:"social-context",className:"FB.XFBML.SocialContext"},{localName:"subscribe",className:"FB.XFBML.Subscribe"}],_widgetPipeEnabledTagCount:0,_widgetPipeIsEnabled:function(){return FB.widgetPipeEnabledApps&&FB.widgetPipeEnabledApps[FB._apiKey]!==undefined}});(function(){try{if(document.namespaces&&!document.namespaces.item.fb){document.namespaces.add("fb")}}catch(a){}}());FB.provide("XFBML",{set:function(c,b,a){FB.log("FB.XFBML.set() has been deprecated.");c.innerHTML=b;FB.XFBML.parse(c,a)}});FB.subclass("Waitable","Obj",function(){},{set:function(a){this.setProperty("value",a)},error:function(a){this.fire("error",a)},wait:function(b,a){if(a){this.subscribe("error",a)}this.monitor("value",this.bind(function(){if(this.value!==undefined){b(this.value);return true}}))}});FB.subclass("Data.Query","Waitable",function(){if(!FB.Data.Query._c){FB.Data.Query._c=1}this.name="v_"+FB.Data.Query._c++},{parse:function(a){var d=FB.String.format.apply(null,a),c=(/^select (.*?) from (\w+)\s+where (.*)$/i).exec(d);this.fields=this._toFields(c[1]);this.table=c[2];this.where=this._parseWhere(c[3]);for(var b=1;b<a.length;b++){if(FB.Type.isType(a[b],FB.Data.Query)){a[b].hasDependency=true}}return this},toFql:function(){var a="select "+this.fields.join(",")+" from "+this.table+" where ";switch(this.where.type){case"unknown":a+=this.where.value;break;case"index":a+=this.where.key+"="+this._encode(this.where.value);break;case"in":if(this.where.value.length==1){a+=this.where.key+"="+this._encode(this.where.value[0])}else{a+=this.where.key+" in ("+FB.Array.map(this.where.value,this._encode).join(",")+")"}break}return a},_encode:function(a){return typeof(a)=="string"?FB.String.quote(a):a},toString:function(){return"#"+this.name},_toFields:function(a){return FB.Array.map(a.split(","),FB.String.trim)},_parseWhere:function(s){var re=(/^\s*(\w+)\s*=\s*(.*)\s*$/i).exec(s),result,value,type="unknown";if(re){value=re[2];if(/^(["'])(?:\\?.)*?\1$/.test(value)){value=eval(value);type="index"}else{if(/^\d+\.?\d*$/.test(value)){type="index"}}}if(type=="index"){result={type:"index",key:re[1],value:value}}else{result={type:"unknown",value:s}}return result}});FB.provide("Data",{query:function(a,c){var b=new FB.Data.Query().parse(arguments);FB.Data.queue.push(b);FB.Data._waitToProcess();return b},waitOn:function(dependencies,callback){var result=new FB.Waitable(),count=dependencies.length;if(typeof(callback)=="string"){var s=callback;callback=function(args){return eval(s)}}FB.Array.forEach(dependencies,function(item){item.monitor("value",function(){var done=false;if(FB.Data._getValue(item)!==undefined){count--;done=true}if(count===0){var value=callback(FB.Array.map(dependencies,FB.Data._getValue));result.set(value!==undefined?value:true)}return done})});return result},_getValue:function(a){return FB.Type.isType(a,FB.Waitable)?a.value:a},_selectByIndex:function(a,c,b,e){var d=new FB.Data.Query();d.fields=a;d.table=c;d.where={type:"index",key:b,value:e};FB.Data.queue.push(d);FB.Data._waitToProcess();return d},_waitToProcess:function(){if(FB.Data.timer<0){FB.Data.timer=setTimeout(FB.Data._process,10)}},_process:function(){FB.Data.timer=-1;var b={},d=FB.Data.queue;FB.Data.queue=[];for(var a=0;a<d.length;a++){var c=d[a];if(c.where.type=="index"&&!c.hasDependency){FB.Data._mergeIndexQuery(c,b)}else{b[c.name]=c}}var e={q:{}};FB.copy(e.q,b,true,function(f){return f.toFql()});e.queries=FB.JSON.stringify(e.queries);FB.api("/fql","GET",e,function(f){if(f.error){FB.Array.forEach(b,function(g){g.error(new Error(f.error.message))})}else{FB.Array.forEach(f.data,function(g){b[g.name].set(g.fql_result_set)})}})},_mergeIndexQuery:function(e,c){var b=e.where.key,f=e.where.value;var a="index_"+e.table+"_"+b;var d=c[a];if(!d){d=c[a]=new FB.Data.Query();d.fields=[b];d.table=e.table;d.where={type:"in",key:b,value:[]}}FB.Array.merge(d.fields,e.fields);FB.Array.merge(d.where.value,[f]);d.wait(function(g){e.set(FB.Array.filter(g,function(h){return h[b]==f}))})},timer:-1,queue:[]});window.setTimeout(function(){var a=/(connect.facebook.net|facebook.com\/assets.php).*?#(.*)/;FB.Array.forEach(document.getElementsByTagName("script"),function(b){if(b.src){var c=a.exec(b.src);if(c){var d=FB.QS.decode(c[2]);FB.Array.forEach(d,function(f,e){if(f=="0"){d[e]=0}});d.oauth=true;FB.init(d)}}});if(window.fbAsyncInit&&!window.fbAsyncInit.hasRun){window.fbAsyncInit.hasRun=true;fbAsyncInit()}},0);FB.provide("Native",{NATIVE_READY_EVENT:"fbNativeReady",onready:function(b){if(!FB.UA.nativeApp()){FB.log("FB.Native.onready only works when the page is rendered in a WebView of the native Facebook app. Test if this is the case calling FB.UA.nativeApp()");return}if(window.__fbNative&&!this.nativeReady){FB.provide("Native",window.__fbNative)}if(this.nativeReady){b()}else{var a=function(c){window.removeEventListener(FB.Native.NATIVE_READY_EVENT,a);FB.Native.onready(b)};window.addEventListener(FB.Native.NATIVE_READY_EVENT,a,false)}}});FB.provide("UIServer.Methods",{"pay.prompt":{transform:function(b){var a=FB.XD.handler(function(c){b.cb(FB.JSON.parse(c.response))},"parent.frames["+(window.name||"iframe_canvas")+"]");b.params.channel=a;FB.Arbiter.inform("Pay.Prompt",b.params);return false}}});FB.provide("UIServer.Methods",{pay:{size:{width:555,height:120},noHttps:true,connectDisplay:"popup",transform:function(b){if(!FB._inCanvas){b.params.order_info=FB.JSON.stringify(b.params.order_info);return b}var a=FB.XD.handler(function(c){b.cb(FB.JSON.parse(c.response))},"parent.frames["+(window.name||"iframe_canvas")+"]");b.params.channel=a;b.params.uiserver=true;FB.Arbiter.inform("Pay.Prompt",b.params);return false}}});FB.provide("Helper",{isUser:function(a){return a<2200000000||(a>=100000000000000&&a<=100099999989999)||(a>=89000000000000&&a<=89999999999999)},getLoggedInUser:function(){return FB.getUserID()},upperCaseFirstChar:function(a){if(a.length>0){return a.substr(0,1).toUpperCase()+a.substr(1)}else{return a}},getProfileLink:function(a,c,b){b=b||(a?FB.getDomain("www")+"profile.php?id="+a.uid:null);if(b){c='<a class="fb_link" href="'+b+'">'+c+"</a>"}return c},invokeHandler:function(handler,scope,args){if(handler){if(typeof handler==="string"){eval(handler)}else{if(handler.apply){handler.apply(scope,args||[])}}}},fireEvent:function(b,c){var a=c._attr.href;c.fire(b,a);FB.Event.fire(b,a,c)},executeFunctionByName:function(f){var a=Array.prototype.slice.call(arguments,1);var e=f.split(".");var d=e.pop();var c=window;for(var b=0;b<e.length;b++){c=c[e[b]]}return c[d].apply(this,a)}});FB.provide("TemplateData",{_initialized:false,_version:0,_response:null,_localStorageTimeout:60*60*24,_enabled:true,enabled:function(){return FB.TemplateData._enabled&&FB.TemplateData._initialized&&FB.TemplateData.supportsLocalStorage()&&FB._userStatus=="connected"&&FB.TemplateData.getResponse()},supportsLocalStorage:function(){try{return"localStorage" in window&&window.localStorage!==null}catch(a){return false}},_isStale:function(a){if(!a||!a.version||a.version!=FB.TemplateData._version||a.currentUserID!=FB.getUserID()){return true}var b=Math.round((new Date()).getTime());return(b-a.setAt)/1000>FB.TemplateData._localStorageTimeout},getResponse:function(){var a=FB.TemplateData;try{a._response=a._response||(a.supportsLocalStorage()&&FB.JSON.parse(localStorage.FB_templateDataResponse||"null"))}catch(b){a._response=null}if(a._isStale(a._response)){a.saveResponse(null)}return a._response},saveResponse:function(a){FB.TemplateData._response=a;if(FB.TemplateData.supportsLocalStorage()){localStorage.FB_templateDataResponse=FB.JSON.stringify(a)}},getData:function(){var a=FB.TemplateData.getResponse();return a?a.data:{}},init:function(a){if(!a){return}FB.TemplateData._initialized=true;FB.TemplateData._version=a;if(FB.TemplateData.supportsLocalStorage()&&!("FB_templateDataResponse" in localStorage)){FB.TemplateData.clear()}},clear:function(){FB.TemplateData.saveResponse(null)},update:function(a){if(FB._userStatus!="connected"){FB.TemplateData.clear()}if(FB._userStatus=="connected"&&!FB.TemplateData.getResponse()){FB.api({method:"dialog.template_data"},function(b){if("error_code" in b){return}var c={data:b,currentUserID:FB.getUserID(),setAt:(new Date()).getTime(),version:FB.TemplateData._version};FB.TemplateData.saveResponse(c)})}}});FB.subclass("TemplateUI","Obj",function(f,e){this.method=f;var c=FB.UA.nativeApp()?0:1;var b={display:"touch",preview_template:1,in_iframe:c,locale:FB._locale,v:FB.TemplateUI._version,user_agent:navigator.userAgent};if(window.devicePixelRatio){b.m_pixel_ratio=window.devicePixelRatio}var d=FB.QS.encode(b);this.cachedCall={url:FB.getDomain("staticfb")+"dialog/"+f+"?"+d,frameName:FB.guid(),id:FB.guid(),size:FB.UIServer.getDefaultSize(),hideLoader:true};FB.XD.handler(this.bind(function(g){if(g.type=="getParams"){this.setProperty("getParamsCb",g.returnCb)}}),"parent",true,this.cachedCall.frameName);if(c){FB.UIServer.iframe(this.cachedCall);FB.Dialog.hide(this.cachedCall.root)}else{if(e&&!FB.TemplateUI._preloads[this.cachedCall.url]){var a=document.createElement("div");FB.TemplateUI._preloads[this.cachedCall.url]={container:a};FB.Content.insertIframe({url:this.cachedCall.url,root:FB.Content.appendHidden(a)})}}},{use:function(c){if(!this.cachedCall.root){FB.UIServer.touch(this.cachedCall);var a=FB.TemplateUI._preloads[this.cachedCall.url];if(a&&a.container){a.container.parentNode.removeChild(a.container);delete a.container}}c.ui_created=true;c.root=this.cachedCall.root;FB.UIServer.setLoadedNode(c,FB.UIServer.getLoadedNode(this.cachedCall.id));delete FB.UIServer._loadedNodes[this.cachedCall.id];var b=FB.Dialog._dialogs[c.id];FB.Dialog._dialogs[this.cachedCall.id]=b;b.id=this.cachedCall.id;delete FB.Dialog._dialogs[c.id];FB.UIServer.getLoadedNode(c).fbCallID=this.cachedCall.id;this.cachedCall.id=c.id;var d={};FB.copy(d,c.params);FB.copy(d,FB.TemplateData.getData()[this.method]);d.frictionless=FB.TemplateUI.isFrictionlessAppRequest(this.method,d);d.common=FB.TemplateData.getData().common;d.method=this.method;this.setParams(d);if(FB.UA.nativeApp()){FB.UIServer._popupMonitor()}},setParams:function(a){this.monitor("getParamsCb",this.bind(function(){if(this.getParamsCb){var b=frames[this.cachedCall.frameName]||FB.UIServer.getLoadedNode(this.cachedCall);b.postMessage(FB.JSON.stringify({params:a,cb:this.getParamsCb}),"*");return true}}))}});FB.provide("TemplateUI",{_timer:null,_cache:{},_preloads:{},_version:0,init:function(){FB.TemplateData.init(FB.TemplateUI._version);FB.TemplateUI.initCache()},useCachedUI:function(c,a){try{FB.TemplateUI.populateCache();cache=FB.TemplateUI._cache[c];delete FB.TemplateUI._cache[c];cache.use(a)}catch(b){FB.TemplateData.clear()}},populateCache:function(b){if(!FB.TemplateData.enabled()||!FB.UA.mobile()){return}clearInterval(FB.TemplateUI._timer);var a={feed:true,apprequests:true};for(var c in a){if(!(c in FB.TemplateUI._cache)){FB.TemplateUI._cache[c]=new FB.TemplateUI(c,b)}}},initCache:function(){FB.TemplateUI._timer=setInterval(function(){FB.TemplateUI.populateCache(true)},2000)},supportsTemplate:function(b,a){return FB.TemplateData.enabled()&&FB.TemplateUI.paramsAllowTemplate(b,a.params)&&a.params.display==="touch"&&FB.UA.mobile()},paramsAllowTemplate:function(d,b){var a={feed:{to:1,attachment:1,source:1},apprequests:{}};if(!(d in a)){return false}for(var c in a[d]){if(b[c]){return false}}return !FB.TemplateUI.willWriteOnGet(d,b)},isFrictionlessAppRequest:function(b,a){return b==="apprequests"&&FB.Frictionless&&FB.Frictionless._useFrictionless},willWriteOnGet:function(b,a){return FB.TemplateUI.isFrictionlessAppRequest(b,a)&&a.to&&FB.Frictionless.isAllowed(a.to)}});FB.provide("URI",{resolve:function(a){if(!a){return window.location.href}var b=document.createElement("div");b.innerHTML='<a href="'+a.replace(/"/g,"&quot;")+'"></a>';return b.firstChild.href}});FB.Class("XFBML.Element",function(a){this.dom=a},FB.copy({getAttribute:function(c,a,b){var d=FB.XFBML.getAttr(this.dom,c);return d?(b?b(d):d):a},_getBoolAttribute:function(b,a){if(FB.XFBML.getAttr(this.dom,b)===null){return a}return FB.XFBML.getBoolAttr(this.dom,b)},_getPxAttribute:function(b,a){return this.getAttribute(b,a,function(d){var c=parseInt(d.replace("px",""),10);if(isNaN(c)){return a}else{return c}})},_getAttributeFromList:function(b,a,c){return this.getAttribute(b,a,function(d){d=d.toLowerCase();if(FB.Array.indexOf(c,d)>-1){return d}else{return a}})},isValid:function(){for(var a=this.dom;a;a=a.parentNode){if(a==document.body){return true}}},clear:function(){this.dom.innerHTML=""}},FB.EventProvider));FB.subclass("XFBML.IframeWidget","XFBML.Element",null,{_iframeName:null,_showLoader:true,_refreshOnAuthChange:false,_allowReProcess:false,_fetchPreCachedLoader:false,_visibleAfter:"load",_widgetPipeEnabled:false,getUrlBits:function(){throw new Error("Inheriting class needs to implement getUrlBits().")},setupAndValidate:function(){return true},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){if(!this._iframeName&&this._widgetPipeEnabled&&FB.XFBML.shouldUseWidgetPipe()){this._iframeName=this.generateWidgetPipeIframeName();FB.XFBML.IframeWidget.allWidgetPipeIframes[this._iframeName]=this;if(FB.XFBML.IframeWidget.masterWidgetPipeIframe===null){FB.XFBML.IframeWidget.masterWidgetPipeIframe=this}}return this._iframeName},getIframeTitle:function(){},getChannelUrl:function(){if(!this._channelUrl){var a=this;this._channelUrl=FB.XD.handler(function(b){a.fire("xd."+b.type,b)},"parent.parent",true)}return this._channelUrl},getIframeNode:function(){return this.dom.getElementsByTagName("iframe")[0]},arbiterInform:function(c,b,a){if(this.loaded){this._arbiterInform(c,b,a)}else{this.subscribe("iframe.onload",FB.bind(this._arbiterInform,this,c,b,a))}},_arbiterInform:function(d,c,b){var a='parent.frames["'+this.getIframeNode().name+'"]';FB.Arbiter.inform(d,c,a,window.location.protocol=="https:",b)},getDefaultWebDomain:function(){return"www"},getDefaultStaticDomain:function(){return"cdn"},process:function(c){if(this._done){if(!this._allowReProcess&&!c){return}this.clear()}else{this._oneTimeSetup()}this._done=true;if(!this.setupAndValidate()){this.fire("render");return}if(this._showLoader){this._addLoader()}FB.Dom.addCss(this.dom,"fb_iframe_widget");if(this._visibleAfter!="immediate"){FB.Dom.addCss(this.dom,"fb_hide_iframes")}else{this.subscribe("iframe.onload",FB.bind(this.fire,this,"render"))}var b=this.getSize()||{};var a=this.getFullyQualifiedURL();if(b.width=="100%"){FB.Dom.addCss(this.dom,"fb_iframe_widget_fluid")}FB.Content.insertIframe({url:a,root:this.dom.appendChild(document.createElement("span")),name:this.getIframeName(),title:this.getIframeTitle(),className:FB._localeIsRtl?"fb_rtl":"fb_ltr",height:b.height,width:b.width,onload:FB.bind(this.fire,this,"iframe.onload")});this.loaded=false;this.subscribe("iframe.onload",FB.bind(function(){this.loaded=true},this))},generateWidgetPipeIframeName:function(){FB.XFBML.IframeWidget.widgetPipeIframeCount++;return"fb_iframe_"+FB.XFBML.IframeWidget.widgetPipeIframeCount},getFullyQualifiedURL:function(){if(FB.XFBML.shouldUseWidgetPipe()&&this._widgetPipeEnabled){return this._getWidgetPipeShell()}var a=this._getURL();if(!this._fetchPreCachedLoader){a+="?"+FB.QS.encode(this._getQS())}if(a.length>2000){a="about:blank";var b=FB.bind(function(){this._postRequest();this.unsubscribe("iframe.onload",b)},this);this.subscribe("iframe.onload",b)}return a},_getWidgetPipeShell:function(){return FB.getDomain("www")+"common/widget_pipe_shell.php"},_oneTimeSetup:function(){this.subscribe("xd.resize",FB.bind(this._handleResizeMsg,this));if(FB.getLoginStatus){this.subscribe("xd.refreshLoginStatus",FB.bind(FB.getLoginStatus,FB,function(){},true));this.subscribe("xd.logout",FB.bind(FB.logout,FB,function(){}))}if(this._refreshOnAuthChange){this._setupAuthRefresh()}if(this._visibleAfter=="load"){this.subscribe("iframe.onload",FB.bind(this._makeVisible,this))}this.oneTimeSetup()},_makeVisible:function(){this._removeLoader();FB.Dom.removeCss(this.dom,"fb_hide_iframes");this.fire("render")},_setupAuthRefresh:function(){FB.getLoginStatus(FB.bind(function(a){var b=a.status;FB.Event.subscribe("auth.statusChange",FB.bind(function(c){if(!this.isValid()){return}if(b=="unknown"||c.status=="unknown"){this.process(true)}b=c.status},this))},this))},_handleResizeMsg:function(b){if(!this.isValid()){return}var a=this.getIframeNode();a.style.height=b.height+"px";if(b.width){a.style.width=b.width+"px"}a.style.border="none";this._makeVisible()},_addLoader:function(){if(!this._loaderDiv){FB.Dom.addCss(this.dom,"fb_iframe_widget_loader");this._loaderDiv=document.createElement("div");this._loaderDiv.className="FB_Loader";this.dom.appendChild(this._loaderDiv)}},_removeLoader:function(){if(this._loaderDiv){FB.Dom.removeCss(this.dom,"fb_iframe_widget_loader");if(this._loaderDiv.parentNode){this._loaderDiv.parentNode.removeChild(this._loaderDiv)}this._loaderDiv=null}},_getQS:function(){return FB.copy({api_key:FB._apiKey,locale:FB._locale,sdk:"joey",ref:this.getAttribute("ref")},this.getUrlBits().params)},_getURL:function(){var b=this.getDefaultWebDomain(),a="";if(this._fetchPreCachedLoader){b=this.getDefaultStaticDomain();a="static/"}return FB.getDomain(b)+"plugins/"+a+this.getUrlBits().name+".php"},_postRequest:function(){FB.Content.submitToTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()})}});FB.provide("XFBML.IframeWidget",{widgetPipeIframeCount:0,masterWidgetPipeIframe:null,allWidgetPipeIframes:{},batchWidgetPipeRequests:function(){if(!FB.XFBML.IframeWidget.masterWidgetPipeIframe){return}var a=FB.XFBML.IframeWidget._groupWidgetPipeDescriptions();var e={widget_pipe:FB.JSON.stringify(a),href:window.location,site:location.hostname,channel:FB.XFBML.IframeWidget.masterWidgetPipeIframe.getChannelUrl(),api_key:FB._apiKey,locale:FB._locale,sdk:"joey"};var d=FB.guid();var c=FB.XFBML.IframeWidget.masterWidgetPipeIframe.dom;var b=c.appendChild(document.createElement("span"));FB.Content.insertIframe({url:"about:blank",root:b,name:d,className:"fb_hidden fb_invisible",onload:function(){FB.Content.submitToTarget({url:FB._domain.www+"widget_pipe.php?widget_pipe=1",target:d,params:e})}})},_groupWidgetPipeDescriptions:function(){var a={};for(var d in FB.XFBML.IframeWidget.allWidgetPipeIframes){var c=FB.XFBML.IframeWidget.allWidgetPipeIframes[d];var b=c.getUrlBits();var e={widget:b.name};FB.copy(e,b.params);a[d]=e}return a}});FB.subclass("XFBML.Activity","XFBML.IframeWidget",null,{_visibleAfter:"load",_refreshOnAuthChange:true,setupAndValidate:function(){this._attr={border_color:this.getAttribute("border-color"),colorscheme:this.getAttribute("color-scheme"),filter:this.getAttribute("filter"),action:this.getAttribute("action"),max_age:this.getAttribute("max_age"),font:this.getAttribute("font"),linktarget:this.getAttribute("linktarget","_blank"),header:this._getBoolAttribute("header"),height:this._getPxAttribute("height",300),recommendations:this._getBoolAttribute("recommendations"),site:this.getAttribute("site",location.hostname),width:this._getPxAttribute("width",300)};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"activity",params:this._attr}}});FB.subclass("XFBML.ButtonElement","XFBML.Element",null,{_allowedSizes:["icon","small","medium","large","xlarge"],onClick:function(){throw new Error("Inheriting class needs to implement onClick().")},setupAndValidate:function(){return true},getButtonMarkup:function(){return this.getOriginalHTML()},getOriginalHTML:function(){return this._originalHTML},process:function(){if(!("_originalHTML" in this)){this._originalHTML=FB.String.trim(this.dom.innerHTML)}if(!this.setupAndValidate()){this.fire("render");return}var b=this._getAttributeFromList("size","medium",this._allowedSizes),c="",a="";if(b=="icon"){c="fb_button_simple"}else{var d=FB._localeIsRtl?"_rtl":"";a=this.getButtonMarkup();c="fb_button"+d+" fb_button_"+b+d}if(a!==""){this.dom.innerHTML=('<a class="'+c+'"><span class="fb_button_text">'+a+"</span></a>");this.dom.firstChild.onclick=FB.bind(this.onClick,this)}this.fire("render")}});FB.subclass("XFBML.AddProfileTab","XFBML.ButtonElement",null,{getButtonMarkup:function(){return FB.Intl.tx._("Add Profile Tab on Facebook")},onClick:function(){FB.ui({method:"profile.addtab"},this.bind(function(a){if(a.tab_added){FB.Helper.invokeHandler(this.getAttribute("on-add"),this)}}))}});FB.subclass("XFBML.Facepile","XFBML.IframeWidget",null,{_visibleAfter:"load",_extraParams:{},setupAndValidate:function(){this._attr={href:this.getAttribute("href"),channel:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme","light"),max_rows:this.getAttribute("max-rows"),action:this.getAttribute("action","like"),tense:this.getAttribute("tense","past"),width:this._getPxAttribute("width",200),ref:this.getAttribute("ref"),size:this.getAttribute("size","small"),extended_social_context:this.getAttribute("extended_social_context",false),login_text:this.dom.innerHTML};this.clear();for(var a in this._extraParams){this._attr[a]=this._extraParams[a]}return true},setExtraParams:function(a){this._extraParams=a},oneTimeSetup:function(){var a=FB._userStatus;FB.Event.subscribe("auth.statusChange",FB.bind(function(b){if(a=="connected"||b.status=="connected"){this.process(true)}a=b.status},this))},getSize:function(){if(this._attr.size=="large"){return{width:this._attr.width,height:90}}return{width:this._attr.width,height:70}},getUrlBits:function(){return{name:"facepile",params:this._attr}}});FB.subclass("XFBML.AddToTimeline","XFBML.Facepile",null,{_visibleAfter:"load",getSize:function(){return{width:300,height:250}},getUrlBits:function(){return{name:"add_to_timeline",params:this._attr}}});FB.subclass("XFBML.Bookmark","XFBML.ButtonElement",null,{getButtonMarkup:function(){return FB.Intl.tx._("Bookmark on Facebook")},onClick:function(){FB.ui({method:"bookmark.add"},this.bind(function(a){if(a.bookmarked){FB.Helper.invokeHandler(this.getAttribute("on-add"),this)}}))}});FB.subclass("XFBML.Comments","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_refreshOnAuthChange:true,setupAndValidate:function(){var a={channel_url:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme"),numposts:this.getAttribute("num-posts",10),width:this._getPxAttribute("width",550),href:this.getAttribute("href"),permalink:this.getAttribute("permalink"),publish_feed:this.getAttribute("publish_feed"),mobile:this._getBoolAttribute("mobile")};if(FB.initSitevars.enableMobileComments&&FB.UA.mobile()&&a.mobile!==false){a.mobile=true}if(!a.href){a.migrated=this.getAttribute("migrated");a.xid=this.getAttribute("xid");a.title=this.getAttribute("title",document.title);a.url=this.getAttribute("url",document.URL);a.quiet=this.getAttribute("quiet");a.reverse=this.getAttribute("reverse");a.simple=this.getAttribute("simple");a.css=this.getAttribute("css");a.notify=this.getAttribute("notify");if(!a.xid){var c=document.URL.indexOf("#");if(c>0){a.xid=encodeURIComponent(document.URL.substring(0,c))}else{a.xid=encodeURIComponent(document.URL)}}if(a.migrated){a.href="http://www.facebook.com/plugins/comments_v1.php?app_id="+FB._apiKey+"&xid="+encodeURIComponent(a.xid)+"&url="+encodeURIComponent(a.url)}}else{var b=this.getAttribute("fb_comment_id");if(!b){b=FB.QS.decode(document.URL.substring(document.URL.indexOf("?")+1)).fb_comment_id;if(b&&b.indexOf("#")>0){b=b.substring(0,b.indexOf("#"))}}if(b){a.fb_comment_id=b;this.subscribe("render",FB.bind(function(){window.location.hash=this.getIframeNode().id},this))}}this._attr=a;return true},oneTimeSetup:function(){this.subscribe("xd.addComment",FB.bind(this._handleCommentMsg,this));this.subscribe("xd.commentCreated",FB.bind(this._handleCommentCreatedMsg,this));this.subscribe("xd.commentRemoved",FB.bind(this._handleCommentRemovedMsg,this))},getSize:function(){if(this._attr.mobile){return{width:"100%",height:160}}return{width:this._attr.width,height:160}},getUrlBits:function(){return{name:"comments",params:this._attr}},getDefaultWebDomain:function(){if(this._attr.mobile){return"https_m"}else{return"https_www"}},_handleCommentMsg:function(a){if(!this.isValid()){return}FB.Event.fire("comments.add",{post:a.post,user:a.user,widget:this})},_handleCommentCreatedMsg:function(b){if(!this.isValid()){return}var a={href:b.href,commentID:b.commentID,parentCommentID:b.parentCommentID};FB.Event.fire("comment.create",a)},_handleCommentRemovedMsg:function(b){if(!this.isValid()){return}var a={href:b.href,commentID:b.commentID};FB.Event.fire("comment.remove",a)}});FB.subclass("XFBML.CommentsCount","XFBML.Element",null,{process:function(){this._href=this.getAttribute("href",window.location.href);this._count=FB.Data._selectByIndex(["commentsbox_count"],"link_stat","url",this._href);FB.Dom.addCss(this.dom,"fb_comments_count_zero");this._count.wait(FB.bind(function(){var a=this._count.value[0].commentsbox_count;this.dom.innerHTML=FB.String.format('<span class="fb_comments_count">{0}</span>',a);if(a>0){FB.Dom.removeCss(this.dom,"fb_comments_count_zero")}this.fire("render")},this))}});FB.provide("Anim",{ate:function(d,e,c,i){c=!isNaN(parseFloat(c))&&c>=0?c:750;var h=40,f={},g={},b=null,j=d.style,a=setInterval(FB.bind(function(){if(!b){b=new Date().getTime()}var k=1;if(c!=0){k=Math.min((new Date().getTime()-b)/c,1)}FB.Array.forEach(e,FB.bind(function(n,o){if(!f[o]){var m=FB.Dom.getStyle(d,o);if(m===false){return}f[o]=this._parseCSS(m+"")}if(!g[o]){g[o]=this._parseCSS(n.toString())}var l="";FB.Array.forEach(f[o],function(q,p){if(isNaN(g[o][p].numPart)&&g[o][p].textPart=="?"){l=q.numPart+q.textPart}else{if(isNaN(q.numPart)){l=q.textPart}else{l+=(q.numPart+Math.ceil((g[o][p].numPart-q.numPart)*Math.sin(Math.PI/2*k)))+g[o][p].textPart+" "}}});FB.Dom.setStyle(d,o,l)},this));if(k==1){clearInterval(a);if(i){i(d)}}},this),h)},_parseCSS:function(b){var a=[];FB.Array.forEach(b.split(" "),function(c){var d=parseInt(c,10);a.push({numPart:d,textPart:c.replace(d,"")})});return a}});FB.provide("Insights",{impression:function(h,a){var f=FB.guid(),c="//ah8.facebook.com/impression.php/"+f+"/",d=new Image(1,1),e=[];if(!h.api_key&&FB._apiKey){h.api_key=FB._apiKey}for(var b in h){e.push(encodeURIComponent(b)+"="+encodeURIComponent(h[b]))}c+="?"+e.join("&");if(a){d.onload=a}d.src=c}});FB.subclass("XFBML.ConnectBar","XFBML.Element",null,{_initialHeight:null,_initTopMargin:0,_picFieldName:"pic_square",_page:null,_displayed:false,_notDisplayed:false,_container:null,_animationSpeed:0,process:function(){FB.getLoginStatus(this.bind(function(a){FB.Event.monitor("auth.statusChange",this.bind(function(){if(this.isValid()&&FB._userStatus=="connected"){this._uid=FB.Helper.getLoggedInUser();FB.api({method:"Connect.shouldShowConnectBar"},this.bind(function(b){if(b!=2){this._animationSpeed=(b==0)?750:0;this._showBar()}else{this._noRender()}}))}else{this._noRender()}return false}))}))},_showBar:function(){var a=FB.Data._selectByIndex(["first_name","profile_url",this._picFieldName],"user","uid",this._uid);var b=FB.Data._selectByIndex(["display_name"],"application","api_key",FB._apiKey);FB.Data.waitOn([a,b],FB.bind(function(c){c[0][0].site_name=c[1][0].display_name;if(!this._displayed){this._displayed=true;this._notDisplayed=false;this._renderConnectBar(c[0][0]);this.fire("render");FB.Insights.impression({lid:104,name:"widget_load"});this.fire("connectbar.ondisplay");FB.Event.fire("connectbar.ondisplay",this);FB.Helper.invokeHandler(this.getAttribute("on-display"),this)}},this))},_noRender:function(){if(this._displayed){this._displayed=false;this._closeConnectBar()}if(!this._notDisplayed){this._notDisplayed=true;this.fire("render");this.fire("connectbar.onnotdisplay");FB.Event.fire("connectbar.onnotdisplay",this);FB.Helper.invokeHandler(this.getAttribute("on-not-display"),this)}},_renderConnectBar:function(d){var c=document.createElement("div"),b=document.createElement("div");c.className="fb_connect_bar";b.className="fb_reset fb_connect_bar_container";b.appendChild(c);document.body.appendChild(b);this._container=b;this._initialHeight=Math.round(parseFloat(FB.Dom.getStyle(b,"height"))+parseFloat(FB.Dom.getStyle(b,"borderBottomWidth")));c.innerHTML=FB.String.format('<div class="fb_buttons"><a href="#" class="fb_bar_close"><img src="{1}" alt="{2}" title="{2}"/></a></div><a href="{7}" class="fb_profile" target="_blank"><img src="{3}" alt="{4}" title="{4}"/></a>{5} <span><a href="{8}" class="fb_learn_more" target="_blank">{6}</a> &ndash; <a href="#" class="fb_no_thanks">{0}</a></span>',FB.Intl.tx._("No Thanks"),FB.getDomain("cdn")+FB.XFBML.ConnectBar.imgs.buttonUrl,FB.Intl.tx._("Close"),d[this._picFieldName]||FB.getDomain("cdn")+FB.XFBML.ConnectBar.imgs.missingProfileUrl,FB.String.escapeHTML(d.first_name),FB.Intl.tx._("Hi {firstName}. \u003Cstrong>{siteName}\u003C/strong> is using Facebook to personalize your experience.",{firstName:FB.String.escapeHTML(d.first_name),siteName:FB.String.escapeHTML(d.site_name)}),FB.Intl.tx._("Learn More"),d.profile_url,FB.getDomain("www")+"sitetour/connect.php");var f=this;FB.Array.forEach(c.getElementsByTagName("a"),function(g){g.onclick=FB.bind(f._clickHandler,f)});this._page=document.body;var e=0;if(this._page.parentNode){e=Math.round((parseFloat(FB.Dom.getStyle(this._page.parentNode,"height"))-parseFloat(FB.Dom.getStyle(this._page,"height")))/2)}else{e=parseInt(FB.Dom.getStyle(this._page,"marginTop"),10)}e=isNaN(e)?0:e;this._initTopMargin=e;if(!window.XMLHttpRequest){b.className+=" fb_connect_bar_container_ie6"}else{b.style.top=(-1*this._initialHeight)+"px";FB.Anim.ate(b,{top:"0px"},this._animationSpeed)}var a={marginTop:this._initTopMargin+this._initialHeight+"px"};if(FB.UA.ie()){a.backgroundPositionY=this._initialHeight+"px"}else{a.backgroundPosition="? "+this._initialHeight+"px"}FB.Anim.ate(this._page,a,this._animationSpeed)},_clickHandler:function(b){b=b||window.event;var a=b.target||b.srcElement;while(a.nodeName!="A"){a=a.parentNode}switch(a.className){case"fb_bar_close":FB.api({method:"Connect.connectBarMarkAcknowledged"});FB.Insights.impression({lid:104,name:"widget_user_closed"});this._closeConnectBar();break;case"fb_learn_more":case"fb_profile":window.open(a.href);break;case"fb_no_thanks":this._closeConnectBar();FB.api({method:"Connect.connectBarMarkAcknowledged"});FB.Insights.impression({lid:104,name:"widget_user_no_thanks"});FB.api({method:"auth.revokeAuthorization",block:true},this.bind(function(){this.fire("connectbar.ondeauth");FB.Event.fire("connectbar.ondeauth",this);FB.Helper.invokeHandler(this.getAttribute("on-deauth"),this);if(this._getBoolAttribute("auto-refresh",true)){window.location.reload()}}));break}return false},_closeConnectBar:function(){this._notDisplayed=true;var a={marginTop:this._initTopMargin+"px"};if(FB.UA.ie()){a.backgroundPositionY="0px"}else{a.backgroundPosition="? 0px"}var b=(this._animationSpeed==0)?0:300;FB.Anim.ate(this._page,a,b);FB.Anim.ate(this._container,{top:(-1*this._initialHeight)+"px"},b,function(c){c.parentNode.removeChild(c)});this.fire("connectbar.onclose");FB.Event.fire("connectbar.onclose",this);FB.Helper.invokeHandler(this.getAttribute("on-close"),this)}});FB.provide("XFBML.ConnectBar",{imgs:{buttonUrl:"images/facebook-widgets/close_btn.png",missingProfileUrl:"pics/q_silhouette.gif"}});FB.subclass("XFBML.Fan","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={api_key:FB._apiKey,connections:this.getAttribute("connections","10"),css:this.getAttribute("css"),height:this._getPxAttribute("height"),id:this.getAttribute("profile-id"),logobar:this._getBoolAttribute("logo-bar"),name:this.getAttribute("name"),stream:this._getBoolAttribute("stream",true),width:this._getPxAttribute("width",300)};if(!this._attr.id&&!this._attr.name){FB.log('<fb:fan> requires one of the "id" or "name" attributes.');return false}var a=this._attr.height;if(!a){if((!this._attr.connections||this._attr.connections==="0")&&!this._attr.stream){a=65}else{if(!this._attr.connections||this._attr.connections==="0"){a=375}else{if(!this._attr.stream){a=250}else{a=550}}}}if(this._attr.logobar){a+=25}this._attr.height=a;return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"fan",params:this._attr}}});FB.subclass("XFBML.Friendpile","XFBML.Facepile",null,{});FB.subclass("XFBML.EdgeCommentWidget","XFBML.IframeWidget",function(a){this._iframeWidth=a.width+1;this._iframeHeight=a.height;this._attr={master_frame_name:a.masterFrameName,offsetX:a.relativeWidthOffset-a.paddingLeft};this.dom=a.commentNode;this.dom.style.top=a.relativeHeightOffset+"px";this.dom.style.left=a.relativeWidthOffset+"px";this.dom.style.zIndex=FB.XFBML.EdgeCommentWidget.NextZIndex++;FB.Dom.addCss(this.dom,"fb_edge_comment_widget")},{_visibleAfter:"load",_showLoader:false,getSize:function(){return{width:this._iframeWidth,height:this._iframeHeight}},getUrlBits:function(){return{name:"comment_widget_shell",params:this._attr}}});FB.provide("XFBML.EdgeCommentWidget",{NextZIndex:10000});FB.subclass("XFBML.EdgeWidget","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_showLoader:false,_rootPadding:null,setupAndValidate:function(){FB.Dom.addCss(this.dom,"fb_edge_widget_with_comment");this._attr={channel_url:this.getChannelUrl(),debug:this._getBoolAttribute("debug"),href:this.getAttribute("href",window.location.href),is_permalink:this._getBoolAttribute("is-permalink"),node_type:this.getAttribute("node-type","link"),width:this._getWidgetWidth(),font:this.getAttribute("font"),layout:this._getLayout(),colorscheme:this.getAttribute("color-scheme"),action:this.getAttribute("action"),ref:this.getAttribute("ref"),show_faces:this._shouldShowFaces(),no_resize:this._getBoolAttribute("no_resize"),send:this._getBoolAttribute("send"),url_map:this.getAttribute("url_map"),extended_social_context:this._getBoolAttribute("extended_social_context",false)};this._rootPadding={left:parseFloat(FB.Dom.getStyle(this.dom,"paddingLeft")),top:parseFloat(FB.Dom.getStyle(this.dom,"paddingTop"))};return true},oneTimeSetup:function(){this.subscribe("xd.authPrompted",FB.bind(this._onAuthPrompt,this));this.subscribe("xd.edgeCreated",FB.bind(this._onEdgeCreate,this));this.subscribe("xd.edgeRemoved",FB.bind(this._onEdgeRemove,this));this.subscribe("xd.presentEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogPresentation,this));this.subscribe("xd.dismissEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogDismissal,this));this.subscribe("xd.hideEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogHide,this));this.subscribe("xd.showEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogShow,this))},getSize:function(){return{width:this._getWidgetWidth(),height:this._getWidgetHeight()}},_getWidgetHeight:function(){var d=this._getLayout();var b=this._shouldShowFaces()?"show":"hide";var e=this._getBoolAttribute("send");var a=65+(e?25:0);var c={standard:{show:80,hide:35},box_count:{show:a,hide:a},button_count:{show:21,hide:21},simple:{show:20,hide:20}};return c[d][b]},_getWidgetWidth:function(){var e=this._getLayout();var c=this._getBoolAttribute("send");var g=this._shouldShowFaces()?"show":"hide";var d=(this.getAttribute("action")==="recommend");var l=(d?265:225)+(c?60:0);var f=(d?130:90)+(c?60:0);var i=this.getAttribute("action")==="recommend"?100:55;var j=this.getAttribute("action")==="recommend"?90:50;var h={standard:{show:450,hide:450},box_count:{show:i,hide:i},button_count:{show:f,hide:f},simple:{show:j,hide:j}};var k=h[e][g];var b=this._getPxAttribute("width",k);var a={standard:{min:l,max:900},box_count:{min:i,max:900},button_count:{min:f,max:900},simple:{min:49,max:900}};if(b<a[e].min){b=a[e].min}else{if(b>a[e].max){b=a[e].max}}return b},_getLayout:function(){return this._getAttributeFromList("layout","standard",["standard","button_count","box_count","simple"])},_shouldShowFaces:function(){return this._getLayout()==="standard"&&this._getBoolAttribute("show-faces",true)},_handleEdgeCommentDialogPresentation:function(a){if(!this.isValid()){return}var b=document.createElement("span");this._commentSlave=this._createEdgeCommentWidget(a,b);this.dom.appendChild(b);this._commentSlave.process();this._commentWidgetNode=b},_createEdgeCommentWidget:function(b,c){var a={commentNode:c,externalUrl:b.externalURL,masterFrameName:b.masterFrameName,layout:this._getLayout(),relativeHeightOffset:this._getHeightOffset(b),relativeWidthOffset:this._getWidthOffset(b),anchorTargetX:parseFloat(b["query[anchorTargetX]"])+this._rootPadding.left,anchorTargetY:parseFloat(b["query[anchorTargetY]"])+this._rootPadding.top,width:parseFloat(b.width),height:parseFloat(b.height),paddingLeft:this._rootPadding.left};return new FB.XFBML.EdgeCommentWidget(a)},_getHeightOffset:function(a){return parseFloat(a["anchorGeometry[y]"])+parseFloat(a["anchorPosition[y]"])+this._rootPadding.top},_getWidthOffset:function(c){var e=parseFloat(c["anchorPosition[x]"])+this._rootPadding.left;var d=FB.Dom.getPosition(this.dom).x;var b=this.dom.offsetWidth;var a=FB.Dom.getViewportInfo().width;var g=parseFloat(c.width);var f=false;if(FB._localeIsRtl){f=g<d}else{if((d+g)>a){f=true}}if(f){e+=parseFloat(c["anchorGeometry[x]"])-g}return e},_getCommonEdgeCommentWidgetOpts:function(a,b){return{colorscheme:this._attr.colorscheme,commentNode:b,controllerID:a.controllerID,nodeImageURL:a.nodeImageURL,nodeRef:this._attr.ref,nodeTitle:a.nodeTitle,nodeURL:a.nodeURL,nodeSummary:a.nodeSummary,width:parseFloat(a.width),height:parseFloat(a.height),relativeHeightOffset:this._getHeightOffset(a),relativeWidthOffset:this._getWidthOffset(a),error:a.error,siderender:a.siderender,extended_social_context:a.extended_social_context,anchorTargetX:parseFloat(a["query[anchorTargetX]"])+this._rootPadding.left,anchorTargetY:parseFloat(a["query[anchorTargetY]"])+this._rootPadding.top}},_handleEdgeCommentDialogDismissal:function(a){if(this._commentWidgetNode){this.dom.removeChild(this._commentWidgetNode);delete this._commentWidgetNode}},_handleEdgeCommentDialogHide:function(){if(this._commentWidgetNode){this._commentWidgetNode.style.display="none"}},_handleEdgeCommentDialogShow:function(){if(this._commentWidgetNode){this._commentWidgetNode.style.display="block"}},_fireEventAndInvokeHandler:function(b,a){FB.Helper.fireEvent(b,this);FB.Helper.invokeHandler(this.getAttribute(a),this,[this._attr.href])},_onEdgeCreate:function(){this._fireEventAndInvokeHandler("edge.create","on-create")},_onEdgeRemove:function(){this._fireEventAndInvokeHandler("edge.remove","on-remove")},_onAuthPrompt:function(){this._fireEventAndInvokeHandler("auth.prompt","on-prompt")}});FB.subclass("XFBML.SendButtonFormWidget","XFBML.EdgeCommentWidget",function(a){this._base(a);FB.Dom.addCss(this.dom,"fb_send_button_form_widget");FB.Dom.addCss(this.dom,a.colorscheme);FB.Dom.addCss(this.dom,(typeof a.siderender!="undefined"&&a.siderender)?"siderender":"");this._attr.nodeImageURL=a.nodeImageURL;this._attr.nodeRef=a.nodeRef;this._attr.nodeTitle=a.nodeTitle;this._attr.nodeURL=a.nodeURL;this._attr.nodeSummary=a.nodeSummary;this._attr.offsetX=a.relativeWidthOffset;this._attr.offsetY=a.relativeHeightOffset;this._attr.anchorTargetX=a.anchorTargetX;this._attr.anchorTargetY=a.anchorTargetY;this._attr.channel=this.getChannelUrl();this._attr.controllerID=a.controllerID;this._attr.colorscheme=a.colorscheme;this._attr.error=a.error;this._attr.siderender=a.siderender;this._attr.extended_social_context=a.extended_social_context},{_showLoader:true,getUrlBits:function(){return{name:"send_button_form_shell",params:this._attr}},oneTimeSetup:function(){this.subscribe("xd.messageSent",FB.bind(this._onMessageSent,this))},_onMessageSent:function(){FB.Event.fire("message.send",this._attr.nodeURL,this)}});FB.subclass("XFBML.Send","XFBML.EdgeWidget",null,{setupAndValidate:function(){FB.Dom.addCss(this.dom,"fb_edge_widget_with_comment");this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme","light"),href:this.getAttribute("href",window.location.href),ref:this.getAttribute("ref"),extended_social_context:this.getAttribute("extended_social_context",false)};this._rootPadding={left:parseFloat(FB.Dom.getStyle(this.dom,"paddingLeft")),top:parseFloat(FB.Dom.getStyle(this.dom,"paddingTop"))};return true},getUrlBits:function(){return{name:"send",params:this._attr}},_createEdgeCommentWidget:function(b,c){var a=this._getCommonEdgeCommentWidgetOpts(b,c);return new FB.XFBML.SendButtonFormWidget(a)},getSize:function(){return{width:FB.XFBML.Send.Dimensions.width,height:FB.XFBML.Send.Dimensions.height}}});FB.provide("XFBML.Send",{Dimensions:{width:80,height:25}});FB.subclass("XFBML.Like","XFBML.EdgeWidget",null,{_widgetPipeEnabled:true,getUrlBits:function(){return{name:"like",params:this._attr}},_createEdgeCommentWidget:function(b,c){if("send" in this._attr&&"widget_type" in b&&b.widget_type=="send"){var a=this._getCommonEdgeCommentWidgetOpts(b,c);return new FB.XFBML.SendButtonFormWidget(a)}else{return this._callBase("_createEdgeCommentWidget",b,c)}},getIframeTitle:function(){return"Like this content on Facebook."}});FB.subclass("XFBML.LikeBox","XFBML.EdgeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,connections:this.getAttribute("connections"),css:this.getAttribute("css"),height:this.getAttribute("height"),id:this.getAttribute("profile-id"),header:this._getBoolAttribute("header",true),name:this.getAttribute("name"),show_faces:this._getBoolAttribute("show-faces",true),stream:this._getBoolAttribute("stream",true),width:this._getPxAttribute("width",300),href:this.getAttribute("href"),colorscheme:this.getAttribute("colorscheme","light"),border_color:this.getAttribute("border_color")};if(this._getBoolAttribute("force_wall",false)){this._attr.force_wall=true}if(this._attr.connections==="0"){this._attr.show_faces=false}else{if(this._attr.connections){this._attr.show_faces=true}}if(!this._attr.id&&!this._attr.name&&!this._attr.href){FB.log('<fb:like-box> requires one of the "id" or "name" attributes.');return false}var a=this._attr.height;if(!a){if(!this._attr.show_faces&&!this._attr.stream){a=62}else{a=95;if(this._attr.show_faces){a+=163}if(this._attr.stream){a+=300}if(this._attr.header&&this._attr.header!=="0"){a+=32}}}this._attr.height=a;this.subscribe("xd.likeboxLiked",FB.bind(this._onLiked,this));this.subscribe("xd.likeboxUnliked",FB.bind(this._onUnliked,this));return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"likebox",params:this._attr}},_onLiked:function(){FB.Helper.fireEvent("edge.create",this)},_onUnliked:function(){FB.Helper.fireEvent("edge.remove",this)}});FB.subclass("XFBML.LiveStream","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={app_id:this.getAttribute("event-app-id"),height:this._getPxAttribute("height",500),hideFriendsTab:this.getAttribute("hide-friends-tab"),redesigned:this._getBoolAttribute("redesigned-stream"),width:this._getPxAttribute("width",400),xid:this.getAttribute("xid","default"),always_post_to_friends:this._getBoolAttribute("always-post-to-friends"),via_url:this.getAttribute("via_url")};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){var a=this._attr.redesigned?"live_stream_box":"livefeed";if(this._getBoolAttribute("modern",false)){a="live_stream"}return{name:a,params:this._attr}}});FB.subclass("XFBML.Login","XFBML.Facepile",null,{_visibleAfter:"load",getSize:function(){return{width:this._attr.width,height:94}},getUrlBits:function(){return{name:"login",params:this._attr}}});FB.subclass("XFBML.LoginButton","XFBML.ButtonElement",null,{setupAndValidate:function(){if(this._alreadySetup){return true}this._alreadySetup=true;this._attr={autologoutlink:this._getBoolAttribute("auto-logout-link"),length:this._getAttributeFromList("length","short",["long","short"]),onlogin:this.getAttribute("on-login"),perms:this.getAttribute("perms"),scope:this.getAttribute("scope"),registration_url:this.getAttribute("registration-url"),status:"unknown"};if(this._attr.autologoutlink){FB.Event.subscribe("auth.statusChange",FB.bind(this.process,this))}if(this._attr.registration_url){FB.Event.subscribe("auth.statusChange",this._saveStatus(this.process,false));FB.getLoginStatus(this._saveStatus(this.process,false))}return true},getButtonMarkup:function(){var a=this.getOriginalHTML();if(a){return a}if(!this._attr.registration_url){if(FB.getAccessToken()&&this._attr.autologoutlink){return FB.Intl.tx._("Facebook Logout")}else{if(FB.getAccessToken()){return""}else{return this._getLoginText()}}}else{switch(this._attr.status){case"unknown":return this._getLoginText();case"notConnected":case"not_authorized":return FB.Intl.tx._("Register");case"connected":if(FB.getAccessToken()&&this._attr.autologoutlink){return FB.Intl.tx._("Facebook Logout")}return"";default:FB.log("Unknown status: "+this._attr.status);return FB.Intl.tx._("Log In")}}},_getLoginText:function(){return this._attr.length=="short"?FB.Intl.tx._("Log In"):FB.Intl.tx._("Log In with Facebook")},onClick:function(){if(!this._attr.registration_url){if(!FB.getAccessToken()||!this._attr.autologoutlink){FB.login(FB.bind(this._authCallback,this),{perms:this._attr.perms,scope:this._attr.scope})}else{FB.logout(FB.bind(this._authCallback,this))}}else{switch(this._attr.status){case"unknown":FB.ui({method:"auth.logintoFacebook"},FB.bind(function(a){FB.bind(FB.getLoginStatus(this._saveStatus(this._authCallback,true),true),this)},this));break;case"notConnected":case"not_authorized":window.top.location=this._attr.registration_url;break;case"connected":if(!FB.getAccessToken()||!this._attr.autologoutlink){this._authCallback()}else{FB.logout(FB.bind(this._authCallback,this))}break;default:FB.log("Unknown status: "+this._attr.status)}}},_authCallback:function(a){FB.Helper.invokeHandler(this._attr.onlogin,this,[a])},_saveStatus:function(a,b){return FB.bind(function(c){if(b&&this._attr.registration_url&&(this._attr.status=="notConnected"||this._attr.status=="not_authorized")&&(c.status=="notConnected"||c.status=="not_authorized")){window.top.location=this._attr.registration_url}this._attr.status=c.status;if(a){a=this.bind(a,this);return a(c)}},this)}});FB.subclass("XFBML.Name","XFBML.Element",null,{process:function(){FB.copy(this,{_uid:this.getAttribute("uid"),_firstnameonly:this._getBoolAttribute("first-name-only"),_lastnameonly:this._getBoolAttribute("last-name-only"),_possessive:this._getBoolAttribute("possessive"),_reflexive:this._getBoolAttribute("reflexive"),_objective:this._getBoolAttribute("objective"),_linked:this._getBoolAttribute("linked",true),_subjectId:this.getAttribute("subject-id")});if(!this._uid){FB.log('"uid" is a required attribute for <fb:name>');this.fire("render");return}var a=[];if(this._firstnameonly){a.push("first_name")}else{if(this._lastnameonly){a.push("last_name")}else{a.push("name")}}if(this._subjectId){a.push("sex");if(this._subjectId==FB.Helper.getLoggedInUser()){this._reflexive=true}}var b;FB.Event.monitor("auth.statusChange",this.bind(function(){if(!this.isValid()){this.fire("render");return true}if(!this._uid||this._uid=="loggedinuser"){this._uid=FB.Helper.getLoggedInUser()}if(!this._uid){return}if(FB.Helper.isUser(this._uid)){b=FB.Data._selectByIndex(a,"user","uid",this._uid)}else{b=FB.Data._selectByIndex(["name","id"],"profile","id",this._uid)}b.wait(this.bind(function(c){if(this._subjectId==this._uid){this._renderPronoun(c[0])}else{this._renderOther(c[0])}this.fire("render")}))}))},_renderPronoun:function(a){var c="",b=this._objective;if(this._subjectId){b=true;if(this._subjectId===this._uid){this._reflexive=true}}if(this._uid==FB.Connect.get_loggedInUser()&&this._getBoolAttribute("use-you",true)){if(this._possessive){if(this._reflexive){c="your own"}else{c="your"}}else{if(this._reflexive){c="yourself"}else{c="you"}}}else{switch(a.sex){case"male":if(this._possessive){c=this._reflexive?"his own":"his"}else{if(this._reflexive){c="himself"}else{if(b){c="him"}else{c="he"}}}break;case"female":if(this._possessive){c=this._reflexive?"her own":"her"}else{if(this._reflexive){c="herself"}else{if(b){c="her"}else{c="she"}}}break;default:if(this._getBoolAttribute("use-they",true)){if(this._possessive){if(this._reflexive){c="their own"}else{c="their"}}else{if(this._reflexive){c="themselves"}else{if(b){c="them"}else{c="they"}}}}else{if(this._possessive){if(this._reflexive){c="his/her own"}else{c="his/her"}}else{if(this._reflexive){c="himself/herself"}else{if(b){c="him/her"}else{c="he/she"}}}}break}}if(this._getBoolAttribute("capitalize",false)){c=FB.Helper.upperCaseFirstChar(c)}this.dom.innerHTML=c},_renderOther:function(a){var b="",c="";if(this._uid==FB.Helper.getLoggedInUser()&&this._getBoolAttribute("use-you",true)){if(this._reflexive){if(this._possessive){b="your own"}else{b="yourself"}}else{if(this._possessive){b="your"}else{b="you"}}}else{if(a){if(null===a.first_name){a.first_name=""}if(null===a.last_name){a.last_name=""}if(this._firstnameonly&&a.first_name!==undefined){b=FB.String.escapeHTML(a.first_name)}else{if(this._lastnameonly&&a.last_name!==undefined){b=FB.String.escapeHTML(a.last_name)}}if(!b){b=FB.String.escapeHTML(a.name)}if(b!==""&&this._possessive){b+="'s"}}}if(!b){b=FB.String.escapeHTML(this.getAttribute("if-cant-see","Facebook User"))}if(b){if(this._getBoolAttribute("capitalize",false)){b=FB.Helper.upperCaseFirstChar(b)}if(a&&this._linked){c=FB.Helper.getProfileLink(a,b,this.getAttribute("href",null))}else{c=b}}this.dom.innerHTML=c}});FB.subclass("XFBML.ProfilePic","XFBML.Element",null,{process:function(){var e=this.getAttribute("size","thumb"),b=FB.XFBML.ProfilePic._sizeToPicFieldMap[e],g=this._getPxAttribute("width"),a=this._getPxAttribute("height"),f=this.dom.style,d=this.getAttribute("uid");if(this._getBoolAttribute("facebook-logo")){b+="_with_logo"}if(g){g=g+"px";f.width=g}if(a){a=a+"px";f.height=a}var c=this.bind(function(h){var i=h?h[0]:null,l=i?i[b]:null;if(!l){l=FB.getDomain("cdn")+FB.XFBML.ProfilePic._defPicMap[b]}var j=((g?"width:"+g+";":"")+(a?"height:"+g+";":"")),k=FB.String.format('<img src="{0}" alt="{1}" title="{1}" style="{2}" class="{3}" />',l,i?FB.String.escapeHTML(i.name):"",j,this.dom.className);if(this._getBoolAttribute("linked",true)){k=FB.Helper.getProfileLink(i,k,this.getAttribute("href",null))}this.dom.innerHTML=k;FB.Dom.addCss(this.dom,"fb_profile_pic_rendered");this.fire("render")});FB.Event.monitor("auth.statusChange",this.bind(function(){if(!this.isValid()){this.fire("render");return true}if(this.getAttribute("uid",null)=="loggedinuser"){d=FB.Helper.getLoggedInUser()}if(FB._userStatus&&d){FB.Data._selectByIndex(["name",b],FB.Helper.isUser(d)?"user":"profile",FB.Helper.isUser(d)?"uid":"id",d).wait(c)}else{c()}}))}});FB.provide("XFBML.ProfilePic",{_defPicMap:{pic:"pics/s_silhouette.jpg",pic_big:"pics/d_silhouette.gif",pic_big_with_logo:"pics/d_silhouette_logo.gif",pic_small:"pics/t_silhouette.jpg",pic_small_with_logo:"pics/t_silhouette_logo.gif",pic_square:"pics/q_silhouette.gif",pic_square_with_logo:"pics/q_silhouette_logo.gif",pic_with_logo:"pics/s_silhouette_logo.gif"},_sizeToPicFieldMap:{n:"pic_big",normal:"pic_big",q:"pic_square",s:"pic",small:"pic",square:"pic_square",t:"pic_small",thumb:"pic_small"}});FB.subclass("XFBML.Question","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,permalink:this.getAttribute("permalink"),id:this.getAttribute("id"),width:this._getPxAttribute("width",400),height:0,questiontext:this.getAttribute("questiontext"),options:this.getAttribute("options")};this.subscribe("xd.firstVote",FB.bind(this._onInitialVote,this));this.subscribe("xd.vote",FB.bind(this._onChangedVote,this));return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"question",params:this._attr}},_onInitialVote:function(a){FB.Event.fire("question.firstVote",this._attr.permalink,a.vote)},_onChangedVote:function(a){FB.Event.fire("question.vote",this._attr.permalink,a.vote)}});FB.subclass("XFBML.Recommendations","XFBML.IframeWidget",null,{_visibleAfter:"load",_refreshOnAuthChange:true,setupAndValidate:function(){this._attr={border_color:this.getAttribute("border-color"),colorscheme:this.getAttribute("color-scheme"),filter:this.getAttribute("filter"),font:this.getAttribute("font"),action:this.getAttribute("action"),linktarget:this.getAttribute("linktarget","_blank"),max_age:this.getAttribute("max_age"),header:this._getBoolAttribute("header"),height:this._getPxAttribute("height",300),site:this.getAttribute("site",location.hostname),width:this._getPxAttribute("width",300)};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"recommendations",params:this._attr}}});FB.subclass("XFBML.RecommendationsBar","XFBML.IframeWidget",null,{getUrlBits:function(){return{name:"recommendations_bar",params:this._attr}},setupAndValidate:function(){function e(k,l){var j=0;var n=null;function m(){l();n=null;j=(new Date()).getTime()}return function(){if(!n){var o=(new Date()).getTime();if(o-j<k){n=window.setTimeout(m,k-(o-j))}else{m()}}return true}}function h(j){if(j.match(/^\d+(?:\.\d+)?%$/)){var k=Math.min(Math.max(parseInt(j,10),0),100);j=k/100}else{if(j!="manual"&&j!="onvisible"){j="onvisible"}}return j}function g(j){return Math.max(parseInt(j,10)||30,10)}function a(j){if(j=="left"||j=="right"){return j}return FB._localeIsRtl?"left":"right"}this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme"),href:FB.URI.resolve(this.getAttribute("href")),side:a(this.getAttribute("side")),site:this.getAttribute("site"),action:this.getAttribute("action"),ref:this.getAttribute("ref"),max_age:this.getAttribute("max_age"),trigger:h(this.getAttribute("trigger","")),read_time:g(this.getAttribute("read_time")),num_recommendations:parseInt(this.getAttribute("num_recommendations"),10)||2};FB._inPlugin=true;this._showLoader=false;this.subscribe("iframe.onload",FB.bind(function(){var j=this.dom.children[0];j.className="fbpluginrecommendationsbar"+this._attr.side},this));var f=FB.bind(function(){FB.Event.unlisten(window,"scroll",f);FB.Event.unlisten(document.documentElement,"click",f);FB.Event.unlisten(document.documentElement,"mousemove",f);window.setTimeout(FB.bind(this.arbiterInform,this,"platform/plugins/recommendations_bar/action",null,FB.Arbiter.BEHAVIOR_STATE),this._attr.read_time*1000);return true},this);FB.Event.listen(window,"scroll",f);FB.Event.listen(document.documentElement,"click",f);FB.Event.listen(document.documentElement,"mousemove",f);if(this._attr.trigger=="manual"){var d=FB.bind(function(j){if(j==this._attr.href){FB.Event.unsubscribe("xfbml.recommendationsbar.read",d);this.arbiterInform("platform/plugins/recommendations_bar/trigger",null,FB.Arbiter.BEHAVIOR_STATE)}return true},this);FB.Event.subscribe("xfbml.recommendationsbar.read",d)}else{var b=e(500,FB.bind(function(){if(this.calculateVisibility()){FB.Event.unlisten(window,"scroll",b);FB.Event.unlisten(window,"resize",b);this.arbiterInform("platform/plugins/recommendations_bar/trigger",null,FB.Arbiter.BEHAVIOR_STATE)}return true},this));FB.Event.listen(window,"scroll",b);FB.Event.listen(window,"resize",b);b()}this.visible=false;var c=e(500,FB.bind(function(){if(!this.visible&&this.calculateVisibility()){this.visible=true;this.arbiterInform("platform/plugins/recommendations_bar/visible")}else{if(this.visible&&!this.calculateVisibility()){this.visible=false;this.arbiterInform("platform/plugins/recommendations_bar/invisible")}}return true},this));FB.Event.listen(window,"scroll",c);FB.Event.listen(window,"resize",c);c();this.focused=true;var i=FB.bind(function(){this.focused=!this.focused;return true},this);FB.Event.listen(window,"blur",i);FB.Event.listen(window,"focus",i);this.resize_running=false;this.animate=false;this.subscribe("xd.signal_animation",FB.bind(function(){this.animate=true},this));return true},getSize:function(){return{height:25,width:(this._attr.action=="recommend"?140:96)}},calculateVisibility:function(){var c=document.documentElement.clientHeight;if(!this.focused&&window.console&&window.console.firebug){return this.visible}switch(this._attr.trigger){case"manual":return false;case"onvisible":var d=this.dom.getBoundingClientRect().top;return d<=c;default:var b=window.pageYOffset||document.body.scrollTop;var a=document.documentElement.scrollHeight;return(b+c)/a>=this._attr.trigger}},_handleResizeMsg:function(a){if(!this.isValid()){return}if(a.width){this.getIframeNode().style.width=a.width+"px"}if(a.height){this._setNextResize(a.height);this._checkNextResize()}this._makeVisible()},_setNextResize:function(a){this.next_resize=a},_checkNextResize:function(){if(!this.next_resize||this.resize_running){return}var b=this.getIframeNode();var a=this.next_resize;this.next_resize=null;if(this.animate){this.animate=false;this.resize_running=true;FB.Anim.ate(b,{height:a+"px"},330,FB.bind(function(){this.resize_running=false;this._checkNextResize()},this))}else{b.style.height=a+"px"}}});FB.XFBML.RecommendationsBar.markRead=function(a){FB.Event.fire("xfbml.recommendationsbar.read",a||window.location.href)};FB.subclass("XFBML.Registration","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_baseHeight:167,_fieldHeight:28,_skinnyWidth:520,_skinnyBaseHeight:173,_skinnyFieldHeight:52,setupAndValidate:function(){this._attr={action:this.getAttribute("action"),border_color:this.getAttribute("border-color"),channel_url:this.getChannelUrl(),client_id:FB._apiKey,fb_only:this._getBoolAttribute("fb-only",false),fb_register:this._getBoolAttribute("fb-register",false),fields:this.getAttribute("fields"),height:this._getPxAttribute("height"),redirect_uri:this.getAttribute("redirect-uri",window.location.href),no_footer:this._getBoolAttribute("no-footer"),no_header:this._getBoolAttribute("no-header"),onvalidate:this.getAttribute("onvalidate"),width:this._getPxAttribute("width",600),target:this.getAttribute("target")};if(this._attr.onvalidate){this.subscribe("xd.validate",this.bind(function(b){var c=FB.JSON.parse(b.value);var d=this.bind(function(e){FB.Arbiter.inform("Registration.Validation",{errors:e,id:b.id},'parent.frames["'+this.getIframeNode().name+'"]',this._attr.channel_url.substring(0,5)=="https")});var a=FB.Helper.executeFunctionByName(this._attr.onvalidate,c,d);if(a){d(a)}}))}this.subscribe("xd.authLogin",FB.bind(this._onAuthLogin,this));this.subscribe("xd.authLogout",FB.bind(this._onAuthLogout,this));return true},getSize:function(){return{width:this._attr.width,height:this._getHeight()}},_getHeight:function(){if(this._attr.height){return this._attr.height}var a;if(!this._attr.fields){a=["name"]}else{try{a=FB.JSON.parse(this._attr.fields)}catch(b){a=this._attr.fields.split(/,/)}}if(this._attr.width<this._skinnyWidth){return this._skinnyBaseHeight+a.length*this._skinnyFieldHeight}else{return this._baseHeight+a.length*this._fieldHeight}},getUrlBits:function(){return{name:"registration",params:this._attr}},getDefaultWebDomain:function(){return"https_www"},_onAuthLogin:function(){if(!FB.getAuthResponse()){FB.getLoginStatus()}FB.Helper.fireEvent("auth.login",this)},_onAuthLogout:function(){if(!FB.getAuthResponse()){FB.getLoginStatus()}FB.Helper.fireEvent("auth.logout",this)}});FB.subclass("XFBML.ServerFbml","XFBML.IframeWidget",null,{_visibleAfter:"resize",setupAndValidate:function(){this._attr={channel_url:this.getChannelUrl(),fbml:this.getAttribute("fbml"),width:this._getPxAttribute("width")};if(!this._attr.fbml){var a=this.dom.getElementsByTagName("script")[0];if(a&&a.type==="text/fbml"){this._attr.fbml=a.innerHTML}}if(!this._attr.fbml){FB.log('<fb:serverfbml> requires the "fbml" attribute.');return false}return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"serverfbml",params:this._attr}}});FB.subclass("XFBML.ShareButton","XFBML.Element",null,{process:function(){this._href=this.getAttribute("href",window.location.href);this._type=this.getAttribute("type","icon_link");FB.Dom.addCss(this.dom,"fb_share_count_hidden");this._renderButton(true)},_renderButton:function(b){if(!this.isValid()){this.fire("render");return}var h="",i="",c="",d="",j=FB.Intl.tx._("Share"),f="";switch(this._type){case"icon":case"icon_link":d="fb_button_simple";h=('<span class="fb_button_text">'+(this._type=="icon_link"?j:"&nbsp;")+"</span>");b=false;break;case"link":h=FB.Intl.tx._("Share on Facebook");b=false;break;case"button":h='<span class="fb_button_text">'+j+"</span>";d="fb_button fb_button_small";b=false;break;case"button_count":h='<span class="fb_button_text">'+j+"</span>";i=('<span class="fb_share_count_nub_right">&nbsp;</span><span class="fb_share_count fb_share_count_right">'+this._getCounterMarkup()+"</span>");d="fb_button fb_button_small";break;default:h='<span class="fb_button_text">'+j+"</span>";c=('<span class="fb_share_count_nub_top">&nbsp;</span><span class="fb_share_count fb_share_count_top">'+this._getCounterMarkup()+"</span>");d="fb_button fb_button_small";f="fb_share_count_wrapper"}var e=FB.guid();this.dom.innerHTML=FB.String.format('<span class="{0}">{4}<a id="{1}" class="{2}" target="_blank">{3}</a>{5}</span>',f,e,d,h,c,i);var g=document.getElementById(e);g.href=this._href;g.onclick=function(){FB.ui({method:"stream.share",u:this.href});return false};if(!b){this.fire("render")}},_getCounterMarkup:function(){if(!this._count){this._count=FB.Data._selectByIndex(["total_count"],"link_stat","url",this._href)}var a="0";if(this._count.value!==undefined){if(this._count.value.length>0){var b=this._count.value[0].total_count;if(b>3){FB.Dom.removeCss(this.dom,"fb_share_count_hidden");a=b>=10000000?Math.round(b/1000000)+"M":(b>=10000?Math.round(b/1000)+"K":b)}}}else{this._count.wait(FB.bind(this._renderButton,this,false))}return'<span class="fb_share_count_inner">'+a+"</span>"}});FB.subclass("XFBML.SocialContext","XFBML.IframeWidget",null,{setupAndValidate:function(){var a=this.getAttribute("size","small");this._attr={channel:this.getChannelUrl(),width:this._getPxAttribute("width",400),height:this._getPxAttribute("height",100),ref:this.getAttribute("ref"),size:this.getAttribute("size"),keywords:this.getAttribute("keywords"),urls:this.getAttribute("urls")};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"social_context",params:this._attr}}});FB.subclass("XFBML.Subscribe","XFBML.EdgeWidget",null,{setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme","light"),href:this.getAttribute("href"),ref:this.getAttribute("ref"),layout:this._getLayout(),show_faces:this._shouldShowFaces(),width:this._getWidgetWidth()};return true},getUrlBits:function(){return{name:"subscribe",params:this._attr}},_getWidgetWidth:function(){var d=this._getLayout();var c={standard:450,box_count:83,button_count:115};var e=c[d];var b=this._getPxAttribute("width",e);var a={standard:{min:225,max:900},box_count:{min:43,max:900},button_count:{min:63,max:900}};if(b<a[d].min){b=a[d].min}else{if(b>a[d].max){b=a[d].max}}return b}});void (0);