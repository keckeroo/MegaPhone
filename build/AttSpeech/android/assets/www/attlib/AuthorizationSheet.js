Ext.define("Att.AuthorizationSheet",{extend:"Ext.Container",xtype:"authorizationsheet",config:{src:null,left:0,right:0,bottom:0,top:0,style:"background-color: #ccc;",showAnimation:{type:"slideIn",direction:"up"},hideAnimation:{type:"slideOut",direction:"down"},masked:{xtype:"loadmask",message:"Loading..."}},updateSrc:function(c){var b=this,a=b.iframe;if(c){if(a){a.dom.onload=Ext.Function.bind(b.onLoad,b);a.dom.src=c;window.addEventListener("message",Ext.Function.bind(b.onWindowMessage,b),false)}}},onLoad:function(){this.iframe.setStyle("height","100%");this.setMasked(false)},onWindowMessage:function(a){if(a.source!==window){this.fireEvent("message",a.data)}},hide:function(){if(this.iframe){this.iframe.destroy();delete this.iframe}this.callParent(arguments)},initialize:function(){var a=this.getSrc();this.on({hide:"onHide",scope:this});this.callParent();this.iframe=Ext.getBody().createChild({tag:"iframe",style:"position: absolute; top:0; left:0; z-index: 999; border: 0; display: block; overflow: hidden; width: 100%; height: 0;"});if(a){this.updateSrc(a)}},onHide:function(){this.destroy()}});